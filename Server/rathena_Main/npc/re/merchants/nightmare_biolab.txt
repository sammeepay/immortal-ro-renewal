//===== rAthena Script =======================================
//= Nightmare Biolab NPCs
//===== Description: =========================================
//= [Walkthrough Conversion]
//= Nightmare Biolab exchange NPCs
//  NOTE: The nightmare biolab monsters are currently missing
//  some items used in the file.
//    Silent Energy Particles (ID: 25127)
//    Weak Energy Particles (ID: 25128)
//    Unstable Energy Particles (ID: 25129)
//    Sinister Energy Particles (ID: 25130)
//    Cursed Crystal (ID: 23080)
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//= 1.1 Added some missing warp points and lore pieces [akaineko]
//============================================================

// Item Functions
//============================================================
function	script	F_Pieces_Of_Sentiment	{	// 22687
	if (strcharinfo(3) == "lhz_dun_n")// usage forbidden on the same map
		return;
	specialeffect2 EF_HIT4;
	.@r = rand(18);
	if (.@r == 0)
		warp "lhz_dun_n",40,212;
	else if (.@r == 1)
		warp "lhz_dun_n",87,84;
	else if (.@r == 2)
		warp "lhz_dun_n",140,89;
	else if (.@r == 3)
		warp "lhz_dun_n",162,252;
	else if (.@r == 4)
		warp "lhz_dun_n",201,101;
	else if (.@r == 5)
		warp "lhz_dun_n",34,70;
	else if (.@r == 6)
		warp "lhz_dun_n",75,138;
	else if (.@r == 7)
		warp "lhz_dun_n",78,189;
	else if (.@r == 8)
		warp "lhz_dun_n",28,140;
	else if (.@r == 9)
		warp "lhz_dun_n",240,64;
	else if (.@r == 10)
		warp "lhz_dun_n",140,39;
	else if (.@r == 11)
		warp "lhz_dun_n",140,191;
	else if (.@r == 12)
		warp "lhz_dun_n",124,138;
	else if (.@r == 13)
		warp "lhz_dun_n",131,235;
	else if (.@r == 14)
		warp "lhz_dun_n",140,114;
	else if (.@r == 15)
		warp "lhz_dun_n",99,106;
	else if (.@r == 16)
		warp "lhz_dun_n",115,253;
	else
		warp "lhz_dun_n",230,138;
	delitem 22687,1;
	return;
}

function	script	F_Cursed_Crystal	{	// 23080
	// custom rates
	.@r = rand(500);
	if (.@r < 10)		getitem 23016,100;// Cursed_Fragment
	else if (.@r < 352)	getitem 23016,200;// Cursed_Fragment
	else if (.@r < 469)	getitem 23016,300;// Cursed_Fragment
	else if (.@r < 498)	getitem 23016,400;// Cursed_Fragment
	else				getitem 23016,500;// Cursed_Fragment
	return;
}

function	script	F_Cursed_Fragment	{	// 23016
	// custom rates
	.@r = rand(981);
	if (.@r < 166) {
		if (rand(2) == 0)
			showscript "กรุณา...อยู่กับข้า...";
		else
			showscript "อยู่...ตรงนี้กับข้า...";
		sleep2 200;
		warp "Random",0,0;
	}
	else if (.@r < 231)	{
		showscript "ตรงนี้มันหนาวจัง...";
		sc_start SC_FREEZE,8000,0;
	}
	else if (.@r < 304) {
		showscript "ข้าขอโทษ...ข้าจะไปแล้ว...ขอบคุณ...";
		getitem 6820,1;// Energy_Fragment
	}
	else if (.@r < 317)
		sc_start SC_CONFUSION,3000,0;
	else if (.@r < 328) {
		showscript "ใครก็ได้ช่วยข้าที...";
		sc_start SC_CURSE,3000,0;
	}
	else if (.@r < 408) {
		showscript "แด่ Odin...";
		sc_start SC_ASSUMPTIO,100000,5;
		specialeffect2 EF_ASSUMPTIO;
	}
	else if (.@r < 496) {
		showscript "ข้าจะไม่ลืมเจ้า...!";
		sc_start SC_ATKPOTION,600000,10;
		sc_start SC_MATKPOTION,600000,10;
	}
	else {
		.@rand = rand(5);
		if (.@rand == 0)
			showscript "ตื่นเถอะ!";
		else if (.@rand == 1)
			showscript "หยุดที...มันเจ็บ...";
		else if (.@rand == 2)
			showscript "ข้ากลัว...กลัวแล้ว...";
		else if (.@rand == 3)
			showscript "เจ้าไม่ควรมาที่นี่...";
		else
			showscript "หวัดดี...มีใครไหม...?";
	}
	return;
}


// Nightmare Biolab Entrances
lighthalzen,321,218,4	script	Ohno Tohiro#1	4_M_RASWORD,{
	disable_items;
	mes "[Ohno Tohiro]";
	.@r = rand(1,10);
	if (.@r < 6)
		mes "ข้าถูกขอให้รวบรวม research charts...";
	else if (.@r < 7) {
		mes "- ฉันได้ยินใครบางคนพูด - - การสื่อสารทางไกล -";
		next;
		mes "[Ohno Tohiro]";
		mes "ใช่ ... ทุกอย่างดำเนินไปอย่างราบรื่น";
		mes "สถานะของการรวบรวมรายงานเรียบร้อยแล้ว";
		mes "ครับท่าน";
		next;
		mes "[Ohno Tohiro]";
		mes "ฉันจะรายงานข้อมูลที่เกี่ยวข้องกับห้องปฏิบัติการเป็นลำดับความสำคัญสูงสุดทันที";
		mes "ครับท่าน ... ผมจะทำ";
		next;
		mes "[Ohno Tohiro]";
		mes "มีใครมาบ้างเดี๋ยวโทรหาอีกที";
	}
	else {
		mes "[Ohno Tohiro]";
		mes "ไหล่ของฉันหนัก";
		mes "ความปรารถนาอันยาวนานของเรา .. ";
		mes "ทีละคนช้าๆ .. ";
	}
	next;
	mes "[Ohno Tohiro]";
	mes "หือ...? ข้าไม่รู้ว่ามีใครอยู่ที่นี่บ้าง...";
	mes "หืม...หืม...";
	mes "มีบางอย่างที่เจ้าต้องการจากข้าไหม ?";
	while(true) {
		next;
		switch( select( "จบการสนทนา.", "ถามเกี่ยวกับ tomb of honor.", "กลับไปที่่ tomb of honor.", "บอกว่ามีเงินไม่พอ." ) ) {
		case 1:
			mes "[Ohno Tohiro]";
			mes "มีนักผจญภัยจำนวนมากที่กำลังมองหารอยแยกนี้, ยกเว้นเจ้า!";
			mes "ถ้าเจ้าเปลี่ยนใจ, ให้กลับมาหาข้า!";
			close;
		case 2:
			mes "[Ohno Tohiro]";
			mes "เจ้าเคยได้ยินเกี่ยวกับรอยแยกที่นำไปสู่สถานที่นั่น, ถูกไหม ?";
			mes "นักผจญภัยส่วนมากก็เหมือนเจ้าวันนี้!";
			next;
			mes "[Ohno Tohiro]";
			mes "ข้าเข้าไปในรอยแยกครั้งแรกและเดาว่า ? มันจะนำไปสู่สถานที่ที่มีมอนสเตอร์จำนวนมาก.";
			next;
			mes "[Ohno Tohiro]";
			mes "ข้ายกมันให้กับนักผจญภัยคนหนึ่ง ที่ข้ารู้จัก. หลังจากนั้น, เขาก็แสดงความสนใจอย่างมากในเรื่องนี้!";
			mes "เขาพึมพำกับตัวเองเกี่่ยวกับ biomedical research, เหมือนจะมีห้องทดลองบางอย่าง.";
			next;
			mes "[Ohno Tohiro]";
			mes "เขาขอร้องให้ข้าแสดงให้เขาดูว่าไปที่นั่นได้อย่างไร. ข้าลังเลที่จะให้เขารู้เรื่องเกี่ยวกับรอยแยกเพราะข้าไม่ต้องการให้ใครรู้เรื่องนี้. แต่ข้าขายข้อมูลนี้ด้วยเงิน 100,000 Zeny.";
			next;
			mes "[Ohno Tohiro]";
			mes "ไม่นานนัก, เขากลับมาพร้อมกับร่างกายที่สาหัส. มันคงเป็นปาฏิหาริย์ที่เขารอดกลับมาได้...น่ากลัวมาก...";
			mes "อย่างไรก็ตาม, เขาได้ของมาหลายอย่าง. เห็นครั้งแรก, มันดูทรงพลังมากนั้นทำให้ข้ากลัว.";
			next;
			mes "[Ohno Tohiro]";
			mes "ในเวลาต่อมา, นักผจญภัยจำนวนมากเข้ามาในสถานที่ๆอันตรายผ่านรอยแยกนี้หลังจากได้ยินข่าวลือ. ข้าไม่เคยพบกับพวกเขาอีกเลย. ตั้งแต่นั้นเป็นต้นมา, สถานที่นี้ถูกเรียกว่า tomb of honor.";
			mes "แม้ว่า, ข้าจะได้รับเงินขอบคุณบางส่วนจากพวกเขา.";
			next;
			mes "[Ohno Tohiro]";
			mes "เจ้าต้องการทราบสาเหตุที่ข้ารับเงิน ?";
			mes "ข้าเจอสถานที่นี้เป็นคนแรก, ดังนั้นความเป็นเจ้าของจึงตกเป็นของข้า! เจ้ามีปัญหาไหม ?";
			next;
			mes "[Ohno Tohiro]";
			mes "หืม หืม...อย่างไรก็ตาม, ให้เงินข้า 100,000 Zeny. แล้ว, ข้าจะเปิดประตูที่จะนำไปสู่รอยแตกสำหรับนักผจญภัยอย่างเจ้า...";
			continue;
		case 3:
			if (Zeny < 100000) {
				mes "[Ohno Tohiro]";
				mes "เจ้ามีเงินไม่พอ!";
				mes "ในโลกนี้ไม่มีของฟรีหรอกนะ!";
				continue;
			}
			mes "[Ohno Tohiro]";
			mes "ไหนดูสิ...หนึ่ง...สอง...สาม";
			mes "ข้าได้รับเงินมาครบแล้ว, ข้าจะเปิดให้เดี๋ยวนี้.";
			mes "ข้าหวังว่าเจ้าจะรอดกลับมา!...";
			next;
			if (Zeny >= 100000) {
				Zeny -= 100000;
				warp "lhz_dun_n",100,202;
			}
			end;
		case 4:
			mes "[Ohno Tohiro]";
			mes "อะไร ? เจ้าไม่มีเงิน, แต่เจ้าต้องการจะเข้าไป ?";
			mes "หืม...งั้น...ต้องมีของมาแลก, เจ้ามี research chart บ้างไหม ?";
			next;
			mes "[Ohno Tohiro]";
			mes "จุ๊ๆ, พูดเบาๆ. เดี๋ยวคนแถวนี้ได้ยิน. แล้วเจ้ามีหรือไม่มี ?";
			next;
			mes "[Ohno Tohiro]";
			mes "อย่ามาถามว่าข้าเอาไปทำอะไร. แค่นำ 10 research charts มาให้ข้าก็พอ. แล้ว, ข้าจะส่งเจ้าไปที่ tomb of honor เอง. เจ้าคิดว่าไง ?";
			next;
			if (select( "กลับไปที่เมนูก่อนหน้า.", "ให้ 10 research charts." ) == 1) {
				mes "[Ohno Tohiro]";
				mes "เจ้าไม่อยากทำธุรกิจกับข้า ?";
				continue;
			}
			if (countitem(7347) < 10) {
				mes "[Ohno Tohiro]";
				mes "ดูเหมือน 10 research charts จะไม่ครบ.";
				mes "บางทีเจ้าอาจลืมหยิบออกจากคลัง.";
				next;
				mes "[Ohno Tohiro]";
				mes "มีอะไรที่เจ้าต้องการจากข้าไหม ?";
				continue;
			}
			mes "[Ohno Tohiro]";
			mes "โอ้...ใช่, นี่แหละ...ที่ข้าต้องการ...หุ หุ...";
			next;
			mes "[Ohno Tohiro]";
			mes "ข้าจะส่งเจ้าไปที่รอยแยกตามสัญญา.";
			mes "ข้าอยากให้เจ้ารอด. แล้วพบกันใหม่!";
			next;
			delitem 7347,10;// Lab_Staff_Record
			warp "lhz_dun_n",100,202;
			end;
		}
	}
}

lighthalzen,320,204,3	script	A kid with black finger	4_F_04,{
	disable_items;
	mes "[Lunar]";
	mes "เจ้ากำลังมองหาอะไร ? เจ้ากำลังมองหาสถานที่ๆมีคนตายเดินเพ่นพ่านไปทั่วหรือ ?";
	next;
	mes "[Lunar]";
	mes "ข้าพาเจ้าไปที่นั้นได้ถ้าเจ้าต้องการ. เจ้าต้องมี ^0000cd20 Sentimental Fragment และ 150K Zeny^000000.";
	next;
	mes "[Lunar]";
	mes "หรือเจ้ามองหาสถานที่ๆปลอดภัยปราศจากพวกคนตาย. เจ้าต้องจ่ายด้วย ^0000cd30 Sentimental Fragment และ 2M Zeny^000000.";
	next;
	mes "[Lunar]";
	mes "เจ้าต้องการไปที่ไหน ?";
	next;
	switch( select( "ที่ๆเต็มไปด้วยคนตาย.", "สถานที่ๆสงบ.", "สถานที่ั้นั่นคืออะไร?", "ไม่เป็นไร." ) ) {
	case 1:
		mes "[Lunar]";
		mes "ได้ตามที่เจ้าต้องการ ?";
		next;
		if (countitem(22687) < 20 || Zeny < 150000) {
			mes "[Lunar]";
			mes "ดูสิ.";
			next;
			mes "[Lunar]";
			mes "มันไม่พอ. เจ้าต้องมี ^0000cd20 Sentimental Fragment และ 150K Zeny^000000. ข้าพาเจ้าไปฟรีๆไม่ได้.";
			close;
		}
		mes "[Lunar]";
		mes "ได้ตามที่เจ้าต้องการ ?";
		next;
		mes "[Lunar]";
		mes "ดีเลย. เจ้ามีครบ. ข้าจะพาเจ้าไป.";
		next;
		mes "[Lunar]";
		mes "แต่...ข้าพาเจ้าไปเพราะเงิน...เจ้าต้องดูแลตัวเอง.";
		next;
		mes "[Lunar]";
		mes "ดังนั้น..เมื่อเจ้าเข้าไปแล้ว, เจ้าจะเห็น ^0000cdStrange Machine ที่ดูเหมือน crystal^000000.";
		next;
		mes "[Lunar]";
		mes "เจ้าเครื่องนี้จะฟื้นฟู HP ของเจ้าถ้าเจ้าใช้มัน. มันเคยช่วยชีวิตข้าไว้. ข้าไม่รู้ว่ามันไปตั้งอยู่ตรงนั้นได้อย่างไร...";
		next;
		mes "[Lunar]";
		mes "ข้าปิดเครื่องเมื่อไม่มีใครใช้มัน, แต่ข้าจะให้เจ้าใช้เป็นกรณีพิเศษ.";
		next;
		mes "[Lunar]";
		mes "ดูแลตัวเองและใช้เครื่องเมื่อจำเป็นด้วย!!";
		delitem 22687,20;// Sentimental Fragment
		Zeny = Zeny - 150000;
		if (isbegin_quest(14683) > 0)
			erasequest 14683;
		setquest 14683;// Mysterious Device
		close2;
		warp "lhz_dun_n",162,254;
		end;
	case 2:
		mes "[Lunar]";
		mes "เจ้ามีของและเงินครบไหม ??";
		next;
		if (countitem(22687) < 30 || Zeny < 2000000) {
			mes "[Lunar]";
			mes "ดูสิ.";
			next;
			mes "[Lunar]";
			mes "มันไม่พอ. ^0000cd30 Sentimental Fragment และ 2M Zeny^000000 ที่ต้องใช้. ข้าพาเจ้าไปฟรีๆไม่ได้.";
			close;
		}
		mes "[Lunar]";
		mes "ดี. เจ้ามีครบ. ข้าจะพาเจ้าไป.";
		next;
		mes "[Lunar]";
		mes "ทางออกคือด้านนอกของกำแพง.";
		next;
		mes "[Lunar]";
		mes "^EE0000เยี่ยม, ข้าจะเตือนเจ้าว่า. ที่นี้มันเซฟไม่ได้, ดังนั้นเมื่อเจ้าออกจากเกมหรือเน็ตตัด, เจ้าจะไปอยู่ที่จุด save point.";
		close2;
		delitem 22687,30;
		Zeny = Zeny - 2000000;
		warp "lhz_d_n2",60,44;
		end;
	case 3:
		mes "[Lunar]";
		mes "ข้าขุดดินเพื่อหาของกินและข้าก็พบบางอย่างที่ดีกว่าของกิน.";
		next;
		mes "[Lunar]";
		mes "คนเป็นไม่สามารถอยู่รอดได้ที่นั่น. มันเต็มไปด้วยคนตาย.";
		next;
		mes "[Lunar]";
		mes "มีข่าวลือว่า..บางคนไปที่นั่นแล้วไม่ได้กลับมาอีกเลย...";
		next;
		mes "[Lunar]";
		mes "ข้ารู้สึกกลัวแต่..มันจะกลายเป็นสถานที่ยอดนิยมสำหรับนักผจญภัยที่จะไปผจญภัย.";
		next;
		mes "[Lunar]";
		mes "สถานที่ๆข้ามาถึง ^0000cdพร้อมกับความเชื่อมั่นแปลก ๆ^000000.";
		next;
		mes "[Lunar]";
		mes "ข้าวิ่งหลบเหล่าคนตายที่พยายามจะฆ่าข้า.";
		next;
		mes "[Lunar]";
		mes "แต่แล้วข้าก็หลงและล้มลงในที่ที่แปลกประหลาด.";
		next;
		mes "[Lunar]";
		mes "มันเป็นที่ๆคล้ายกับคนตายอยู่ ^0000cdแต่มันให้ความรู้สึก^000000. น่ากลัว, ดังนั้นข้าจึงออกไปทันที.";
		next;
		mes "[Lunar]";
		mes "ข้าจะพาเจ้าไปถ้าเจ้าให้เงินและของมา.";
		next;
		mes "[Lunar]";
		mes "มันไม่ง่ายเลยถ้าเจ้าจะไปเอง.";
		close;
	case 4:
		mes "[Lunar]";
		mes "มาเยี่ยมข้าได้ตลอด. พวกเราไม่มีอะไรจะเสียแล้ว.";
		close;
	}
}

lighthalzen,327,216,3	script	Crevice#1	4_CRACK,{
	end;
OnInit:
	initnpctimer;
	end;
OnTimer5000:
	specialeffect EF_AGIUP3;
	end;
OnTimer6000:
	initnpctimer;
	end;
}

// Dungeon exit
lhz_dun_n,96,203,3	script	Dungeon gateway#1	4_CRACK,{
	if (select( "ไม่ออกจากดันเจี้ยน.", "ออกจากดันเจี้ยน." ) == 1) {
		mes "- เจ้ายังมีสิ่งที่จะต้องทำที่นี่ -";
		close;
	}
	warp "lighthalzen",310,228;
	end;
OnInit:
	initnpctimer;
	end;
OnTimer5000:
	specialeffect EF_AGIUP3;
	end;
OnTimer6000:
	initnpctimer;
	end;
}

// Lighthalzen Exchange NPCs
lighthalzen,319,213,4	script	Veteran Adventurer#JCv2	4_M_MELODY,2,2,{
	disable_items;
	mes "[Veteran Adventurer]";
	mes "โอ้! เจ้าต้องการแลกจิตใจหรือเศษความริษยาละ ?";
	next;
	setarray .@items[0],
		6469,200,	// Will of Warrior
		6470,200,	// Blood Thirst
		6471,300;	// Ghost Chill
	.@color$[0] = countitem(6820) < 200 ? "^777777" : "^000000";
	.@color$[1] = countitem(6820) < 300 ? "^777777" : "^000000";
	.@s = select( "ฟังเรื่องราว", .@color$[0] + "1 Will of Warrior (200 Energy pieces)", .@color$[0] + "1 Blood Thirst (200 energy pieces)", .@color$[1] + "1 Ghost Chill (300 energy pieces)^000000" ) - 2;
	if (.@s == -1) {
		emotion ET_QUESTION;
		mes "[Veteran Adventurer]";
		mes "เจ้าดูเหมือนคนมีเวลาว่าง, ใช่ปะ ? เยี่ยม, งานของข้าก็มีไม่มากด้วยวันนี้...";
		next;
		mes "[Veteran Adventurer]";
		mes "วันหนึ่ง, อยู่ๆหัวหน้าสมาคมก็มาหาข้าที่สมาคม...";
		next;
		mes "[Veteran Adventurer]";
		mes "'^1F294Dข้าจะทำให้ทุกคนในสมาคมสวมใส่ Cloak of the Fallen Soldier!!^000000'.";
		next;
		mes "[Veteran Adventurer]";
		mes "ดังที่เจ้ารู้, อุปกรณ์นี้ต้องการวัสดุจำนวนมาก, ดังนั้นสมาชิกทุกคนจึงไม่มีทางเลือกอื่นนอกจากต้องติดอยู่ในดันเจี้ยนและถูกบังคับให้ทำงาน.";
		next;
		mes "[Veteran Adventurer]";
		mes "เจ้าไม่มีทางรู้เลยว่าโชคของเจ้าจะเจอกับอะไร. ข้าทำงานขุดเหมืองด้วยความมุ่งมั่นแล้วก็เจอกับชิ้นส่วนที่หายากจำนวนมาก.";
		next;
		mes "[Veteran Adventurer]";
		mes "ผู้ช่วยหัวหน้าสมาคม ส่งข้าไปแลกเปลี่ยนสิ่งของต่างๆกับคนอื่นๆ.";
		next;
		mes "[Veteran Adventurer]";
		mes "แน่นอนว่า, จำนวนที่ใช้แลกถูกตัดสินใจโดยหัวหน้าสมาคม";
		mes "'^1F294Dข้าจะไม่ยอมรับหากต่ำกว่าจำนวนนี้!!^000000'...";
		next;
		emotion ET_HNG;
		mes "[Veteran Adventurer]";
		mes "ผู้ช่วยหัวหน้าสมาคม เคยลองที่จะโยนดินใส่ตาหัวหน้าสมาคม. พวกเราพยายามอย่างหนักเพื่อหยุดหล่อนไว้.";
		next;
		mes "[Veteran Adventurer]";
		mes "ข้าเดาว่าพวกเราสามารถดูแลได้อย่างรวดเร็วหากปรับจำนวนให้น้อยลง. (กระซิก)...มันคงจะเกิดขึ้นได้.";
		close;
	}
	.@s *= 2;
	mes "[Veteran Adventurer]";
	mes "^3300661 " + getitemname(.@items[.@s]) + "^000000 แลกเปลี่ยนกับ ^CC3333" + .@items[.@s+1] + " Energy Pieces^000000.";
	next;
	if (select( "แลก.", "ไม่แลก." ) == 2) {
		emotion ET_OTL;
		mes "[Veteran Adventurer]";
		mes "อะไร ?...ข้าคิดว่าเจ้ามาเพื่อแลกเปลี่ยนนะเนี่ย.";
		close;
	}
	while(true) {
		if (countitem(6820) < .@items[.@s+1]) {
			emotion ET_SORRY;
			mes "[Veteran Adventurer]";
			mes "ขอโทษด้วย. ข้าไม่มีทางเลือกเพราะหัวหน้าสมาคมสั่งมา. เจ้าต้องมี " + .@items[.@s+1] + " , ถ้าเขาปฏิเสธ, ข้าช่วยไม่ได้จริงๆ.";
			close;
		}
		delitem 6820, .@items[.@s+1];// Energy Pieces
		getitem .@items[.@s],1;
		mes "[Veteran Adventurer]";
		mes "เจ้าต้องการแลกเปลี่ยนต่อหรือไม่?";
		next;
		if (select( "ต่อเลย.", "หยุดแลกเปลี่ยน." ) == 2) {
			emotion ET_THANKS;
			mes "[Veteran Adventurer]";
			mes "ขอบคุณ...ข้าเดาว่าข้าจะไม่ถูกลงโทษโดยหัวหน้าสมาคมแล้ว, ขอบใจเจ้ามาก.";
			close;
		}
	}
	end;

OnTouch:
	.@r = rand(4);
	if (.@r == 0)
		npctalk "ข้าจะแลก 1 Will of Warrior กับ 200 energy pieces.", "", bc_self;
	else if (.@r == 1)
		npctalk "ข้าจะแลก 1 Ghost Chill กับ 300 energy pieces.", "", bc_self;
	else if (.@r == 2)
		npctalk "ข้าจะแลก 1 Blood Thirst กับ 200 energy pieces.", "", bc_self;
	else {
		emotion ET_OHNO;
		npctalk "โอ้!...ทำไมมันถึงหาเศษชิ้นส่วนยากนัก ?", "", bc_self;
	}
	end;
}

lighthalzen,312,296,4	script	Bully#JCv2	4_M_LGTPOOR,{
	disable_items;
	mes "[Bully]";
	mes "เฮ้, คู่หู. เจ้าพอจะมี Energy pieces เหลือไหม ? ข้าจะแลกมันกับสิ่งที่คู่ควรถ้าเจ้าต้องการ.";
	next;
	.@s = select(
		"Listen to the story.",
		( countitem(25127) < 2000 ? "^777777" : "^000000" ) + "1 Energy Fragment (2000 Silent E Particles)",
		( countitem(25128) < 1000 ? "^777777" : "^000000" ) + "1 Energy Fragment (1000 Weak E Particles)",
		( countitem(25129) < 500 ? "^777777" : "^000000" ) + "1 Energy Fragment (500 Unstable E Particles)",
		( countitem(25130) < 500 ? "^777777" : "^000000" ) + "1 Energy Fragment (500 Sinister E Particles)",
		( countitem(25131) < 50 ? "^777777" : "^000000" ) + "1 Energy Fragment (50 Fallen E Particles)",
		( countitem(6820) < 50 ? "^777777" : "^000000" ) + "1 Sentimental Fragment (50 Energy Fragments)",
		( countitem(6820) < 666 ? "^777777" : "^000000" ) + "1 Cursed Fragment (666 Energy Fragments)"
	) - 2;
	if (.@s == -1) {
		emotion ET_THINK;
		mes "[Bully]";
		mes ". . . . . . .";
		next;
		mes "[Bully]";
		mes "หืมมม...นี้ค่อนข้างคาดไม่ถึง.";
		mes "โดยปกติเขาจะละเลยข้าและไปทำงานของเขา.";
		next;
		mes "[Bully]";
		mes "ขอโทษด้วย, แต่ข้าไม่มีอะไรจะพูด. ที่ข้ามาทำงานนี้เพราะมันทำเงินให้ข้ามากมาย.";
		close;
	}
	setarray .@exchange[0],
		6820, 25127,2000,	// Silent Energy Particle -> Energy Fragment
		6820, 25128,1000,	// Weak Energy Particles -> Energy Fragment
		6820, 25129,500,	// Unstable Energy Particle -> Energy Fragment
		6820, 25130,500,	// Sinister Energy Particle -> Energy Fragment
		6820, 25131,50,		// Fallen Energy Particle -> Energy Fragment
		22687, 6820,50,		// Energy Fragment -> Sentimental Fragment
		23016, 6820,666;	// Energy Fragment -> Cursed Fragment
	.@index = .@s * 3;
	mes "[Bully]";
	mes "เจ้าต้องการที่จะแลก ^330066" + .@exchange[.@index+2] + " " + getitemname(.@exchange[.@index+1]) + "^000000 กับ ^CC33331 " + getitemname(.@exchange[.@index]) + "^000000 ใช่ไหม ?";
	next;
	if (select( "แลก.", "ไม่แลก." ) == 2) {
		emotion ET_HNG;
		mes "[Bully]";
		mes "เยี่ยม...ถ้าเจ้าไม่ชอบ, ก็อย่ากังวล.";
		close;
	}
	while(true) {
		if (countitem(.@exchange[.@index+1]) < .@exchange[.@index+2]) {
			emotion ET_SCRATCH;
			mes "[Bully]";
			mes "ไม่...ไม่...เจ้าแลกไม่ได้.";
			mes "ข้าบอกเจ้าแล้วว่าเจ้าต้องแลกมันด้วย " + .@exchange[.@index+2] + " (item)s.";
			close;
		}
		delitem .@exchange[.@index+1], .@exchange[.@index+2];
		getitem .@exchange[.@index], 1;
		emotion ET_SEXY;
		mes "[Bully]";
		mes "โอ้ ขอบคุณ. เจ้าต้องการแลกเปลี่ยนเลยไหม ?";
		next;
		if (select( "แลกเลย.", "หยุดแลกเปลี่ยน." ) == 2) {
			mes "[Bully]";
			mes "เมื่อใดที่เจ้ามี energy piece เหลือ, ให้มาหาข้า.";
			close;
		}
	}
}

// Enchants NPCs
lhz_dun_n,145,265,4	script	Silent Mind#JCv2	4_CENERE,{
	disable_items;
	mes "[Silent Mind]";
	mes ". . . . . .!";
	mes "...";
	mes "^FF0000*เจ้าสามารถรับ Death's Chest ได้เมื่อเจ้าให้วิญญาณที่เหมือนกันมา 3 อัน.*^000000";
	next;
	setarray .@item[0],6814,6815,6816,6817,6818,6819;
	for ( .@i = 0; .@i < 6; ++.@i ) {
		if (countitem(.@item[.@i]) < 3)
			.@menu$ += "^777777ไม่พอ " + getitemname(.@item[.@i]) + ".^000000:";
		else
			.@menu$ += "ส่งมอบ 3 " + getitemname(.@item[.@i]) + ".:";
	}
	.@s = select(.@menu$) - 1;
	while(true) {
		if (countitem(.@item[.@s]) < 3) {
			emotion ET_HNG;
			mes "[Silent Mind]";
			mes "!. . . . . .";
			mes "^FF0000*เจ้าต้องมีวิญญาณที่เหมือนกันมา 3 อันเพื่อแลกกับ Death's Chest.*^000000";
			close;
		}
		delitem .@item[.@s],3;
		getitem 22679,1;// Chest_of_Death
		emotion ET_HUNGRY;
		mes "[Silent Mind]";
		mes ". . . . . .";
		mes "...";
		mes "^FF0000*เจ้าได้รับ Death's Chest แล้ว. เจ้าต้องการแลกต่อหรือไม่?*^000000";
		next;
		if (select( "แลกต่อ.", "หยุดแลก." ) == 2) {
			mes "[Silent Mind]";
			mes ". . . . . .";
			close;
		}
	}
}

lhz_dun_n,134,265,2	script	Wandering Mind#JCv2	4_CENERE,{
	disable_items;
	npctalk "ขขข...ข้าาา...รู้สึกได้...", "", bc_self;
	mes "[Wandering Mind]";
	mes "ขขข...ข้าาา...รู้สึกได้...ถึงความแค้น...อันมากมาย...ของผู้คน...";
	next;
	npctalk "ข้า...คือ...ใคร ?...", "", bc_self;
	mes "[Wandering Mind]";
	mes "ที่นี้...ที่ไหน ?...ที่ไหนกัน ?...อ้ากกก...ข้า...คือ...ใคร ?...ทำไมข้า...จำไม่ได้...";
	next;
	mes "[Wandering Mind]";
	mes "ข้าต้องการ...พลัง...ที่แข็งแกร่ง...ใน...การแก้แค้น...มันจะช่วย...ข้า...และเจ้า...ทั้งคู่...ขขข...";
	next;
	switch( select( "ออฟ Old Helmet", "ลบออฟ Old Helmet", "รายละเอียดออฟ Old Helmet" ) ) {
	case 1:
		npctalk "ส่งมอบ...ความแค้น...ความแค้นมา...", "", bc_self;
		mes "[Wandering Mind]";
		mes "อาาา...หิหิ...ส่งมอบ...ความแค้น...ความแค้น...ที่แข็งแกร่งมา...ข้าจะออฟ...พลังที่พิเศษ...ลงในหมวกให้...";
		mes "^FF0000*ถ้าเจ้านำ Cursed Fragment มา, เจ้าสามารถออฟหมวกได้.*^000000";
		next;
		.@equip_id = getequipid(EQI_HEAD_TOP);
		switch(.@equip_id) {
			case 18971:// Old_Rune_Circlet
			case 18972:// Old_Mitra
			case 18973:// Old_Driver_Band_R
			case 18974:// Old_Driver_Band_Y
			case 18975:// Old_Shadow_Handicraft
			case 18976:// Old_Minstrel_Song_Hat
			case 18977:// Old_Midas_Whisper
			case 18978:// Old_Magic_Stone_Hat
			case 18979:// Old_Blazing_Soul
			case 18980:// Old_Wind_Whisper
			case 18981:// Old_Dying_Swan
			case 18982:// Old_Circlet_Of_Bone
			case 18983:// Old_Protect_Of_Crown
			case 18984:// Old_Camo_RabbitHood
				break;
			default:
				npctalk "ทำลายมัน...ทำลายมัน...", "", bc_self;
				mes "[Wandering Mind]";
				mes "มันเป็น...ความน่าสนใจ...ในหมวก...มันไม่หอมหวาน...ที่จะได้รับพลังพิเศษ...เจ้าต้องการ...ทำลายมัน...? ขขข...";
				mes "^FF0000*ในการออฟ Old Helmet จะใช้ Cursed Fragment เท่านั้น.*^000000";
				close;
		}
		mes "[Wandering Mind]";
	
		.@requirement = 10;	// 10 Cursed Fragments by default
		setarray .@card[0], getequipcardid(EQI_HEAD_TOP,0), getequipcardid(EQI_HEAD_TOP,1), getequipcardid(EQI_HEAD_TOP,2), getequipcardid(EQI_HEAD_TOP,3);
		.@refine = getequiprefinerycnt(EQI_HEAD_TOP);
	
		if (.@card[3] == 0) {
			.@slot = 3;
			mes "พวกเรา...จะเริ่ม...แบบสบายๆ ?...ลอง...โชคของเจ้า...อา..หิหิ...";
			mes "^FF0000*ในการออฟช่องที่ 4. จะสุ่มออฟเป็นหนึ่งใน 6 สเตตัส.*^000000";
		}
		else if (.@card[2] == 0) {
			.@slot = 2;
			mes "อา...หิหิ...ดู...เหมือนเจ้า...จะ...ออฟ...ครั้งแรกไปแล้ว ?...";
			mes "^FF0000*ในการออฟช่องที่ 3. จะสุ่มออฟเป็นหนึ่งใน 6 สเตตัส.*^000000";
		}
		else if (.@card[1] == 0) {
			.@slot = 1;
			mes "อา...หิหิ...ถ้าเกิดมี...หนทาง...ที่จะได้รับ...พลังที่แข็งแกร่งมากขึ้น...ควรจะ...ตัดสินใจ...ตอนนี้...";
			mes "^FF0000*ในการออฟช่องที่ 2.";
			mes "เจ้าอาจได้ออฟ Mettle, Magic Essence, Acute, Master Archer, Adamantine, Affection, มันสามารถเลื่อนขั้นขึ้นได้.*^000000";
		}
		else {
			// enchant leveling
			switch( .@card[1] ) {
			case 29061:	// Ambition1Lv
			case 29071:	// Tab1Lv
			case 29081:	// Expect1Lv
			case 29091:	// ArchLine1Lv
			case 29101:	// Steel1Lv
			case 29111:	// Mercy1Lv
				mes "อา...หิ...หิ...เจ้ามัน...ดวงดี...ข้าอยาก...ให้เจ้าสำเร็จตลอด!...เพราะงั้น...ข้าคิดว่า...เจ้าจะกลับมาหาข้า...พร้อมกับความแค้นที่มันมากขึ้น...";
				.@requirement = 20;
				.@enchant_level = 1;
				.@enchant_rate = 80;
				break;
			case 29062:	// Ambition2Lv
			case 29072:	// Tab2Lv
			case 29082:	// Expect2Lv
			case 29092:	// ArchLine2Lv
			case 29102:	// Steel2Lv
			case 29112:	// Mercy2Lv
				mes "เลื่อนขั้น...เลเวล...3 ?...ถ้าเจ้าสำเร็จ...เจ้าจะ...ได้รับ...พลังที่แข็งแกร่งมากขึ้น...แต่ถ้าเจ้าล้มเหลว...เจ้าจะสูญเสียพลัง...ที่เจ้าได้รับมา...ออกไป...";
				.@requirement = 40;
				.@enchant_level = 2;
				.@enchant_rate = 70;
				break;
			case 29063:	// Ambition3Lv
			case 29073:	// Tab3Lv
			case 29083:	// Expect3Lv
			case 29093:	// ArchLine3Lv
			case 29103:	// Steel3Lv
			case 29113:	// Mercy3Lv
				mes "เลื่อนขั้น...เลเวล...4 ?...ถ้าเจ้าสำเร็จ...เจ้าจะ...ได้รับ...พลังที่แข็งแกร่งมากขึ้น...แต่ถ้าเจ้าล้มเหลว...เจ้าจะสูญเสียพลัง...ที่เจ้าได้รับมา...ออกไป...";
				.@requirement = 50;
				.@enchant_level = 3;
				.@enchant_rate = 50;
				break;
			case 29064:	// Ambition4Lv
			case 29074:	// Tab4Lv
			case 29084:	// Expect4Lv
			case 29094:	// ArchLine4Lv
			case 29104:	// Steel4Lv
			case 29114:	// Mercy4Lv
				mes "เลื่อนขั้น...เลเวล...5 ?...เจ้าพร้อม...ที่จะควบคุม...พลังอัน...ยิ่งใหญ่...หรือยัง ?...แต่ถ้าเจ้าล้มเหลว...คงไม่อยากเห็น...ผล...ที่จะได้รับ...";
				.@requirement = 70;
				.@enchant_level = 4;
				.@enchant_rate = 20;
				break;
			case 29065:	// Ambition5Lv
			case 29075:	// Tab5Lv
			case 29085:	// Expect5Lv
			case 29095:	// ArchLine5Lv
			case 29105:	// Steel5Lv
			case 29115:	// Mercy5Lv
				mes "เลื่อนขั้น...เลเวล...6 ?...เจ้าพร้อม...ที่จะควบคุม...พลังอัน...ยิ่งใหญ่...หรือยัง ?...แต่ถ้าเจ้าล้มเหลว...คงไม่อยากเห็น...ผล...ที่จะได้รับ...";
				.@requirement = 100;
				.@enchant_level = 5;
				.@enchant_rate = 20;	// unknown rates
				break;
			case 29066:	// Ambition6Lv
			case 29076:	// Tab6Lv
			case 29086:	// Expect6Lv
			case 29096:	// ArchLine6Lv
			case 29106:	// Steel6Lv
			case 29116:	// Mercy6Lv
				// custom text
				mes "เลื่อนขั้น...เลเวล...7 ?...เจ้าพร้อม...ที่จะควบคุม...พลังอัน...ยิ่งใหญ่...หรือยัง ?...แต่ถ้าเจ้าล้มเหลว...คงไม่อยากเห็น...ผล...ที่จะได้รับ...";
				.@requirement = 150;
				.@enchant_level = 6;
				.@enchant_rate = 20;	// unknown rates
				break;
			case 29067:	// Ambition7Lv
			case 29077:	// Tab7Lv
			case 29087:	// Expect7Lv
			case 29097:	// ArchLine7Lv
			case 29107:	// Steel7Lv
			case 29117:	// Mercy7Lv
				// custom text
				mes "เลื่อนขั้น...เลเวล...8 ?...เจ้าพร้อม...ที่จะควบคุม...พลังอัน...ยิ่งใหญ่...หรือยัง ?...แต่ถ้าเจ้าล้มเหลว...คงไม่อยากเห็น...ผล...ที่จะได้รับ...";
				.@requirement = 250;
				.@enchant_level = 7;
				.@enchant_rate = 20;	// unknown rates
				break;
			case 29068:	// Ambition8Lv
			case 29078:	// Tab8Lv
			case 29088:	// Expect8Lv
			case 29098:	// ArchLine8Lv
			case 29108:	// Steel8Lv
			case 29118:	// Mercy8Lv
				// custom text
				mes "เลื่อนขั้น...เลเวล...9 ?...เจ้าพร้อม...ที่จะควบคุม...พลังอัน...ยิ่งใหญ่...หรือยัง ?...แต่ถ้าเจ้าล้มเหลว...คงไม่อยากเห็น...ผล...ที่จะได้รับ...";
				.@requirement = 500;
				.@enchant_level = 8;
				.@enchant_rate = 20;	// unknown rates
				break;
			case 29069:	// Ambition9Lv
			case 29079:	// Tab9Lv
			case 29089:	// Expect9Lv
			case 29099:	// ArchLine9Lv
			case 29109:	// Steel9Lv
			case 29119:	// Mercy9Lv
				// custom text
				mes "เลื่อนขั้น...เลเวล...10 ?...เจ้าพร้อม...ที่จะควบคุม...พลังอัน...ยิ่งใหญ่...หรือยัง ?...แต่ถ้าเจ้าล้มเหลว...คงไม่อยากเห็น...ผล...ที่จะได้รับ...";
				.@requirement = 1000;
				.@enchant_level = 9;
				.@enchant_rate = 20;	// unknown rates
				break;
			case 29070:	// Ambition10Lv
			case 29080:	// Tab10Lv
			case 29090:	// Expect10Lv
			case 29100:	// ArchLine10Lv
			case 29110:	// Steel10Lv
			case 29120:	// Mercy10Lv
				// custom text
			default:
				mes "อาา หิหิ...มันเป็นไปไม่ได้...ที่จะได้พลัง...ระดับนี้...หนทางเดียวคือ...ลบออฟ...";
				mes "^FF0000*Mettle, Magic Spirit, Vigor, Bull's Eye, Adamantine, Benevolence";
				mes "เจ้าสามารถเลื่อนเลเวลออฟได้เมื่ออุปกรณ์ได้ออฟแล้ว.*^000000";
				close;
			}
			.@slot = 999;
		}
		next;
		mes "[Wandering Mind]";
		mes "อย่างไรก็ตาม...ก่อนที่มันจะเกิดขึ้น...ข้าต้องตรวจสอบ...ว่าเจ้ามี...Cursed Fragments พอหรือเปล่า...";
		next;
		mes "[Wandering Mind]";
		mes "Cursed...Fragments..." + .@requirement + " อัน...คือ...จำนวนที่...ข้าต้องการ...ในการออฟ...มัน ?...ขข...ขข...";
		mes "^FF0000*ในการออฟ, " + .@requirement + " Cursed Fragment(s) คือ ที่ต้องใช้.*^000000";
		next;
		if (select( "จ่ายค่าบริการ.", "ไม่จ่าย." ) == 2) {
			mes "[Wandering Mind]";
			mes "ข...ขข...ดูเหมือน...ว่าเจ้า...ยังไม่พร้อม...ที่จะรับพลังอันยิ่งใหญ่...ตอนนี้...";
			close;
		}
		if (countitem(23016) < .@requirement) {// Cursed Fragment
			mes "[Wandering Mind]";
			mes "ข...ขข...เจ้า...แกล้ง...ข้ารึ ?...เจ้า...กระหาย...ในพลัง...แต่เจ้า...กลับไม่เตรียมพร้อม ?...";
			mes "^FF0000*ในการออฟ, Cursed Fragment(s) 10 อัน คือ ที่ต้องใช้.";
			mes "ตรวจดูจำนวนของ Cursed Fragments ของเจ้าอีกครั้ง.*^000000";
			close;
		}
		mes "[Wandering Mind]";
		mes "อาา..หิหิ...มันเป็น...พลังในการแก้แค้น...ข้าคิดว่า...พลังนี้...ยังแข็งแกร่ง...ไม่พอ...";
		mes "^FF0000*ระดับการตีบวก, การ์ด, ของอุปกรณ์จะไม่หายไป. อย่างไรก็ตาม, เลเวลออฟอาจลดลงได้, ขึ้นอยู่กับมันจะสำเร็จหรือล้มเหลว.*^000000";
		next;
		if (select( "ดำเนินการออฟ.", "ไม่ออฟแล้ว." ) == 2) {
			mes "[Wandering Mind]";
			mes "ข...ขข...ดูเหมือน...ว่าเจ้า...ยังไม่พร้อม...ที่จะรับพลังอันยิ่งใหญ่...ตอนนี้...";
			close;
		}
		progressbar "000000",1;
		delitem 23016, .@requirement;// Cursed Fragment

		// anti-hack
		if (callfunc("F_IsEquipIDHack", EQI_HEAD_TOP, .@equip_id) || callfunc("F_IsEquipCardHack", EQI_HEAD_TOP, .@card[0], .@card[1], .@card[2], .@card[3]) || callfunc("F_IsEquipRefineHack", EQI_HEAD_TOP, .@refine))
			close;

		switch(.@slot) {
		case 3:
		case 2:
			setarray .@enchant[0],
				4700,	// Strength1
				4701,	// Strength2
				4702,	// Strength3
				4703,	// Strength4
				4704,	// Strength5
				4710,	// Inteligence1
				4711,	// Inteligence2
				4712,	// Inteligence3
				4713,	// Inteligence4
				4714,	// Inteligence5
				4720,	// Dexterity1
				4721,	// Dexterity2
				4722,	// Dexterity3
				4723,	// Dexterity4
				4724,	// Dexterity5
				4730,	// Agility1
				4731,	// Agility2
				4732,	// Agility3
				4733,	// Agility4
				4734,	// Agility5
				4740,	// Vitality1
				4741,	// Vitality2
				4742,	// Vitality3
				4743,	// Vitality4
				4744,	// Vitality5
				4750,	// Luck1
				4751,	// Luck2
				4752,	// Luck3
				4753,	// Luck4
				4754;	// Luck5
			.@card[.@slot] = .@enchant[ rand( getarraysize(.@enchant) ) ];	// unknown rates
			break;
		case 1:
			setarray .@enchant[0],
				4703,	// Strength4
				4704,	// Strength5
				4713,	// Inteligence4
				4714,	// Inteligence5
				4723,	// Dexterity4
				4724,	// Dexterity5
				4733,	// Agility4
				4734,	// Agility5
				4743,	// Vitality4
				4744,	// Vitality5
				4753,	// Luck4
				4754,	// Luck5
				29061,	// Ambition1Lv
				29071,	// Tab1Lv
				29081,	// Expect1Lv
				29091,	// ArchLine1Lv
				29101,	// Steel1Lv
				29111;	// Mercy1Lv
			.@card[1] = .@enchant[ rand( getarraysize(.@enchant) ) ];	// unknown rates
			break;
		case 999:
			// enchant leveling
			if (.@enchant_rate > rand(100))
				.@level_dt = 1;
			else
				.@level_dt = -1;
			.@enchant_level += .@level_dt;
			.@card[1] += .@level_dt;
			if (.@card[1] < 29061 || .@card[1] > 29120) {
				mes "[Wandering Mind]";
				mes "บางสิ่งที่เลวร้ายเกิดขึ้น.";
				close;
			}
			if (.@enchant_level < 1 || .@enchant_level > 10) {
				// item not deleted
				specialeffect2 EF_SUI_EXPLOSION;
				mes "[Wandering Mind]";
				mes "ข..อ้ากกก...!! พลังในการแก้แค้น...ได้เข้าสู่...ความบ้าคลั่ง...อย่างไรก็ตาม...โชคดีที่มันไม่ได้ระเบิดเพราะพลัง...ที่....อ่อนแอ.";
				close;
			}
			break;
		default:
			mes "[Wandering Mind]";
			mes "บางสิ่งที่เลวร้ายเกิดขึ้น.";
			close;
		}
		delequip EQI_HEAD_TOP;
		getitem2 .@equip_id,1,1,.@refine,0,.@card[0],.@card[1],.@card[2],.@card[3];
		if (.@level_dt == -1) {// can only happens during enchant leveling
			specialeffect2 EF_SUI_EXPLOSION;
			mes "[Wandering Mind]";
			mes "ข..อ้ากกก...!! พลังในการแก้แค้น...ได้เข้าสู่...ความบ้าคลั่ง...พลัง...ที่เคยเป็น...มัน...ได้ลดลง...ไปหนึ่งระดับ...";
			mes "^FF0000*เนื่องจากออฟล้มเหลว, เลเวลออฟจะถูกลดไปหนึ่งระดับ.*^000000";
			close;
		}
		specialeffect2 EF_FIREHIT;
		mes "[Wandering Mind]";
		mes "มัน...สำเร็จ. ข้ารู้สึกได้ว่าพลังในการแก้แค้นได้แข็งแกร่งขึ้นแล้ว.";
		mes "^FF0000*ยินดีด้วย. เจ้าออฟสำเร็จไปด้วยดี.*^000000";
		close;
	case 2:
		.@equip_id = getequipid(EQI_HEAD_TOP);
		switch(.@equip_id) {
			case 18971:// Old_Rune_Circlet
			case 18972:// Old_Mitra
			case 18973:// Old_Driver_Band_R
			case 18974:// Old_Driver_Band_Y
			case 18975:// Old_Shadow_Handicraft
			case 18976:// Old_Minstrel_Song_Hat
			case 18977:// Old_Midas_Whisper
			case 18978:// Old_Magic_Stone_Hat
			case 18979:// Old_Blazing_Soul
			case 18980:// Old_Wind_Whisper
			case 18981:// Old_Dying_Swan
			case 18982:// Old_Circlet_Of_Bone
			case 18983:// Old_Protect_Of_Crown
			case 18984:// Old_Camo_RabbitHood
				break;
			default:
				npctalk "ทำลายมัน...ทำลายมัน...", "", bc_self;
				mes "[Wandering Mind]";
				mes "มันเป็น...ความน่าสนใจ...ในหมวก...มันไม่หอมหวาน...ที่จะได้รับพลังพิเศษ...เจ้าต้องการ...ทำลายมัน...? ขขข...";
				mes "^FF0000*ในการออฟ Old Helmet จะใช้ Cursed Fragment เท่านั้น.*^000000";
				close;
		}
		setarray .@card[0], getequipcardid(EQI_HEAD_TOP,0), getequipcardid(EQI_HEAD_TOP,1), getequipcardid(EQI_HEAD_TOP,2), getequipcardid(EQI_HEAD_TOP,3);
		.@refine = getequiprefinerycnt(EQI_HEAD_TOP);

		if (.@card[3] < 1) {// one enchant required
			npctalk "เจ้า...ใจเย็นมาก...", "", bc_self;
			mes "[Wandering Mind]";
			mes "ขขข...เจ้าดูนิ่งมาก...เหมือนไม่เคย...ได้รับพลัง...ที่ข้า...ให้เจ้า...มาก่อน...";
			mes "^FF0000*หมวกนี้ไม่เคยออฟ, ทำให้ลบออฟไม่ได้.*^000000";
			close;
		}
		npctalk "อาา...หิหิ...ข้าจะกิน...มัน...วันนี้...", "", bc_self;
		mes "[Wandering Mind]";
		mes "ขขข...เจ้าเหมือน...ไม่ชอบในพลังนี้ ?...นำ 10 mind powers มาให้ข้า...แล้ว, ข้าจะทำให้พลัง...มันหายไป...";
		mes "^FF0000*เจ้าต้องมี 10 Sentimental Fragments ในการลบออฟ.";
		mes "หมวกที่จะลบออฟ, เลเวลการตีบวกและการ์ดจะไม่หายไป, จากการลบออฟ.*^000000";
		next;
		if (select( "ไม่สนใจ.", "จ่ายค่าบริการ." ) == 1) {
			npctalk "ตลอดไป...", "", bc_self;
			mes "[Wandering Mind]";
			mes "ข้าจะ...รอ...เจ้า...ถ้าเจ้าต้องการข้า...ข้าจะรอเจ้า...ตลอดไป...ขขข...";
			close;
		}
		if (countitem(22687) < 10) {// Sentimental Fragment
			mes "ขข..ข...ถ้าเจ้า...ไม่นำ...";
			mes "10 mind powers...มา ข้าอาจ...มีปัญหาได้...";
			mes "^FF0000*เจ้าต้องมี 10 Sentimental Fragments ในการลบออฟ.";
			mes "ตรวจดูจำนวนของ Sentimental Fragments ของเจ้าอีกครั้ง.*^000000";
			close;
		}
		npctalk "ข...ขข...", "", bc_self;
		mes "[Wandering Mind]";
		mes "เรียบร้อย!...ข้า...ลบ...ออฟออกจาก...old helmet ให้แล้ว...ข้าคิดว่า...พวกเรายังสามารถ...เก่งขึ้นได้...";
		next;
		progressbar "000000",2;
		specialeffect2 EF_FIREHIT;
		delitem 22687,10;// Sentimental Fragment

		if (callfunc("F_IsEquipIDHack", EQI_HEAD_TOP, .@equip_id) || callfunc("F_IsEquipCardHack", EQI_HEAD_TOP, .@card[0], .@card[1], .@card[2], .@card[3]) || callfunc("F_IsEquipRefineHack", EQI_HEAD_TOP, .@refine))
			close;

		delequip EQI_HEAD_TOP;
		getitem2 .@equip_id,1,1,.@refine,0,.@card[0],0,0,0;
		mes "[Wandering Mind]";
		mes "ข..ขข...พลัง...ในการแก้แค้น...ได้ถูก...ดูดซับ...ออกไปแล้ว...ข..อ้ากกก...";
		close;
	case 3:
		for ( .@i = 18971; .@i <= 18984; ++.@i ) {
			if (.@i < 18977)
				.@string$[0] += getitemname(.@i) + ", ";
			else if (.@i < 18984)
				.@string$[1] += getitemname(.@i) + ", ";
			else
				.@string$[2] = getitemname(.@i);
		}
		mes "[Wandering Mind]";
		mes "เจ้าต้องการ...พลังหรอ ?...ถ้า งั้น, เจ้า...ต้องมี...old Helmet..";
		mes "^FF0000*เจ้าสามารถออฟมันลงใน " + .@string$[0];
		mes "" + .@string$[1];
		mes "" + .@string$[2] + ".*^000000";
		next;
		mes "[Wandering Mind]";
		mes "ถ้าเจ้า...นำพลัง...ในการแก้แค้น...มา ข้าจะ...มอบพลัง...ให้เจ้า...";
		mes "^FF0000*เจ้าต้องมี Cursed Fragments ในการออฟ.*^000000";
		next;
		mes "[Wandering Mind]";
		mes "ขขข...แน่นอนว่า...การได้รับพลัง...ที่ดีกว่า...เจ้าต้องมี...จำนวนพลัง...ในการแก้แค้น...ที่มาก...";
		mes "^FF0000*ในการออฟช่องที่ 4, 3, 2 นั้น. เจ้าต้องมี 10 Cursed Fragments เมื่อเจ้าทำการออฟแต่ละช่องเป็นครั้งแรก.*^000000";
		next;
		mes "[Wandering Mind]";
		mes "ถ้าเจ้ามี...โอกาส...เจ้าอาจจะ...สามารถอัพเกรด...ระดับออฟได้...";
		mes "^FF0000*เมื่อเลื่อนระดับเลเวลออฟ, 50, 70, 100, 150, 250, 500, 1000 Cursed Fragments คือจำนวน, ที่ใช้เลื่อนเลเวลออฟ";
		mes "เพิ่มจาก 20 Cursed Fragments ในครั้งที่ 2, และ 40 Cursed Fragments ในครั้งที่ 3.*^000000";
		close;
	}
}

lhz_dun_n,143,269,4	script	Victimized Soul's Mind#1	4_M_DEATH2,{
	disable_items;
	.@r = rand(5);
	if (.@r == 0)
		npctalk "เจ้า...คือคน...ที่หันมาหา...ข้า...ที่เป็นมอนสเตอร์...", "", bc_self;
	else if (.@r == 1)
		npctalk "ช่วยข้าด้วย...ข้าจะ...ทำทุกอย่าง...ตามที่เจ้าสั่ง...", "", bc_self;
	else if (.@r == 2)
		npctalk "ภรรยาและลูกสาว...ที่น่ารักของข้า...รอข้าก่อน...ข้ากำลัง...กลับบ้าน...", "", bc_self;
	else if (.@r == 3)
		npctalk "หลังจากนั้น...ทุกสิ่ง..มัน...น่ากลัว", "", bc_self;
	else
		npctalk "ขา...ข้า...แขน...ข้า...", "", bc_self;
	mes "[Victimized Soul's Mind]";
	mes "จิต...วิญญาณ...อันมากมาย...";
	mes "อดีต...ปัจจุบัน...และการแก้แค้น...";
	mes "เจ้าคือใคร...";
	mes "เจ้าสามารถ...ควบคุม...เหล่า...ผู้ทุกข์ทรมานจากความเศร้าได้ไหม ?...";
	next;
	if (.@r == 0)
		npctalk "แม้หลังจากที่ข้าตาย...หรืออยู่ในความฝันของข้ากัน...", "", bc_self;
	else if (.@r == 1)
		npctalk "ได้โปรด...ช่วยข้าด้วย...เอามันออกไป...มีดนั้น...มันทำให้ข้ากลัว...", "", bc_self;
	else if (.@r == 2)
		npctalk "ได้...โปรด...พาข้าออกไป...ข้าจะให้เงินเจ้า...ตามที่เจ้าต้องการ...", "", bc_self;
	else if (.@r == 3)
		npctalk "หรือว่า...เจ้าจะกลัว...โทสะ...ของพระเจ้า ?...", "", bc_self;
	else
		npctalk "อ้าก...อา...อั๊ก...", "", bc_self;
	mes "[Victimized Soul's Mind]";
	mes "ถ้าเจ้า...สามารถ...ทำมันได้...ข้าอาจจะ...ขอให้...เจ้า...ช่วยก็เป็นได้...";
	next;
	if (.@r == 0)
		npctalk "ข้าจะเคี้ยวเจ้า...เป็นชิ้นๆ...", "", bc_self;
	else if (.@r == 1)
		npctalk "ได้โปรด...อ้ากก...", "", bc_self;
	else if (.@r == 2)
		npctalk "ได้โปรด...", "", bc_self;
	else if (.@r == 3)
		npctalk "พระเจ้า...จะคุ้มครอง...เจ้า...ถ้าเจ้า...สำนึกผิด...ในบาป...ที่เจ้าทำไว้...", "", bc_self;
	else
		npctalk "...ว้ากกกก...", "", bc_self;
	mes "[Victimized Soul's Mind]";
	mes "อาวุธเหล่านี้...จะเต็มไปด้วย...จิตวิญญาณ...แห่งความเศร้า...และความแค้น...";
	mes "ถ้าเจ้า...นำมัน...มา...ข้าจะเปลี่ยน...มัน...เป็น energy...pieces...";
	while(true) {
		next;
		if (checkweight(2677,5) == 0) {
			mes "[Victimized Soul's Mind]";
			mes "กระเป๋าเป้ของคุณ .. ";
			mes "เต็มไปหมด ... ";
			close;
		}
		if (select( "ส่งมอบอาวุธ.", "จบการสนทนา." ) == 2) {
			mes "[Victimized Soul's Mind]";
			mes "...เจ้าจะ...กลับ...มาหาข้า...อีก...";
			close;
		}
		mes "[Victimized Soul's Mind]";
		mes "เลือกชนิด...อาวุธ...ที่เจ้า...ต้องการ...เปลี่ยน ?...";
		next;
		while(true) {
			switch( select( "กลับไปที่เมนูก่อนหน้า", "Katar", "Bow", "Axe, Mace, Book", "Wand", "Sword, Dagger", "Spear, Two-handed sword", "Musical instrument, Whip, Knuckle" ) ) {
			case 1:
				break;
			case 2:
				callsub S_Exchange,
					1284,	// Krishna
					1290,	// Agent_Katar
					1285,	// Chakram
					1291;	// Guillotine_Katar
				continue;
			case 3:
				callsub S_Exchange,
					18109,	// Catapult
					18110,	// Big_CrossBow
					1745,	// Falken_Blitz
					18103,	// Mystic_Bow
					18111;	// Creeper_Bow
				continue;
			case 4:
				callsub S_Exchange,
					1311,	// Vecer_Axe
					1392,	// Ygnus_Stale
					1393,	// End_Sektura
					16017,	// Bloody_Cross
					16010,	// Red_Ether_Bag
					2161,	// Geffenia_Book_Water
					1584,	// Chilly_Spell_Book
					16000,	// Erde
					16001;	// Red_Square_Bag
				continue;
			case 5:
				callsub S_Exchange,
					2005,	// Dea_Staff
					2004,	// Kronos
					1647,	// Croce_Staff
					1659,	// Recovery_Light
					1646,	// La'cryma_Stick
					1654;	// Mental_Stick
				continue;
			case 6:
				callsub S_Exchange,
					13431,	// Chrome_Sword
					13421,	// Ruber
					13061,	// Black_Wing
					13062,	// Ancient_Dagger
					13070,	// Scarletto_Nail
					13069,	// Aztoe_Nail
					13046,	// Krieg
					13047;	// Weihna
				continue;
			case 7:
				callsub S_Exchange,
					1433,	// Imperial_Spear
					1435,	// Cannon_Spear
					1490,	// Giant_Lance
					1196,	// Chrome_Twohand_Sword
					1189;	// Krasnaya
				continue;
			case 8:
				callsub S_Exchange,
					1930,	// Green_Whistle
					1984,	// Stem_Whip
					1985,	// Rosebine
					1830;	// Sura_Rampage
				continue;
			}
			break;
		}
	}
	end;

S_Exchange:
	.@size = getargcount();
	.@menu$ = "กลับไปที่เมนูก่อนหน้า:";
	for ( .@i = 0; .@i < .@size; .@i++ ) {
		if (countitem(getarg(.@i)) < 1)
			.@menu$ += "^999999ไม่มี " + getitemname(getarg(.@i)) + ".^000000:";
		else
			.@menu$ += "เจ้ามี " + getitemname(getarg(.@i)) + ".:";
	}
	.@s = select(.@menu$) - 2;
	if (.@s == -1)
		return;
	mes "[Victimized Soul's Mind]";
	mes "เจ้า...ได้เลือก...อาวุธ...ซึ่งดูเหมือนจะ...เต็มไปด้วย...จิตวิญญาณ...ข้าจะ...พยายามเปลี่ยนมัน...เป็น Energy Fragments...เจ้า...เห็นด้วยไหม ?";
	next;
	if (select( "ไม่เห็นด้วย.", "จะเอา Energy Fragments." ) == 2) {
		if (countitem(getarg(.@s)) < 1) {
			mes "[Victimized Soul's Mind]";
			mes "เจ้าไม่...มี...^006400" + getitemname(getarg(.@s)) + "^000000...";
			mes "เจ้ามี...ธุระอะไรกับข้า...อีกไหม ?...";
			next;
			return;
		}
		donpcevent strnpcinfo(0) + "::OnBar";
		sleep2 5000;
		specialeffect EF_BLACKBODY;
		specialeffect EF_GUMGANG4;
		specialeffect EF_DARKCASTING2;
		specialeffect EF_RG_COIN7;
		percentheal -50,-50;
		specialeffect2 EF_POISONSMOKE;
		specialeffect2 EF_NPC_BURNT;
		delitem getarg(.@s),1;
		.@r = rand(100);
		if (.@r < 70)
			.@amount = 1;
		else if (.@r < 90)
			.@amount = 2;
		else
			.@amount = 3;
		getitem 6820, .@amount;// Energy Fragment
		mes "[Victimized Soul's Mind]";
		mes "ข้าได้สร้าง...Energy...Fragment...จาก ^006400" + getitemname(getarg(.@s)) + "^000000...";
		next;
		mes "- ข้าได้รับความเสียหายอย่างหนัก - - โดยคลื่นพลังงาน - - ได้ซึมสู่ร่างกายของข้า. -";
		next;
	}
	mes "[Victimized Soul's Mind]";
	mes "เจ้ามี...ธุระอะไรกับข้า...อีกไหม ?...";
	next;
	return;

OnBar:
	progressbar_npc "000000",5;
	end;
}

lhz_dun_n,136,269,6	script	Sorrowful Soul's Mind#1	4_M_DEATH,{
	disable_items;
	.@r = rand(5);
	if (.@r == 0)
		npctalk "แม่...มันเจ็บ...", "", bc_self;
	else if (.@r == 1)
		npctalk "พวกเจ้าทุกคน...ไปลงนรกซะ...", "", bc_self;
	else if (.@r == 2)
		npctalk "ข้าไม่เข้าใจ. ทำไม...ถึงเป็นข้า ?...", "", bc_self;
	else if (.@r == 3)
		npctalk "อั๊ก...ข้าไม่...สมควรได้รับ...", "", bc_self;
	else
		npctalk "พวกเจ้าทุกคน...คือปิศาจ...", "", bc_self;
	mes "[Sorrowful Soul's Mind]";
	mes "จิต...วิญญาณ...อันมากมาย...";
	mes "อดีต...ปัจจุบัน...และการแก้แค้น...";
	next;
	if (.@r == 0)
		npctalk "หัวใจของข้า...เจ็บปวดเกินไป...", "", bc_self;
	else if (.@r == 1)
		npctalk "ข้า...จะ...ส่งเจ้าไป...", "", bc_self;
	else if (.@r == 2)
		npctalk "ข้า...ไม่มีเวลาเหลือ...ที่จะอยู่ที่นี่ต่อแล้ว.", "", bc_self;
	else if (.@r == 3)
		npctalk "เจ้าคิดว่า...เจ้าจะมีชีวิตรอด...หลังจากที่เจ้าทำเสร็จทุกอย่างรึ ?...", "", bc_self;
	else
		npctalk "ข้าไม่รู้เรื่อง...ข้า...ไม่สมควรได้รับมัน...", "", bc_self;
	mes "[Sorrowful Soul's Mind]";
	mes "เจ้าคือใคร ?...";
	mes "เจ้าสามารถ...นำเหล่าจิตวิญญาณ...ที่ทุกข์ทรมาน...จากความเศร้ามาได้ไหม ?...";
	next;
	if (.@r == 0)
		npctalk "ข้าอยาก...กลับ...บ้าน...", "", bc_self;
	else if (.@r == 1)
		npctalk "ข้าจะ...สาปแช่งเจ้า...แม้ว่า...ข้าจะตายไปแล้ว...", "", bc_self;
	else if (.@r == 2)
		npctalk "ข้าไม่มี...อะไร...", "", bc_self;
	else if (.@r == 3)
		npctalk "เจ้ากำลังคิด...อะไรอยู่ ?...", "", bc_self;
	else
		npctalk "เจ้า...ไม่เคยมี...แม้แต่...ครอบครัว ?...", "", bc_self;
	mes "[Sorrowful Soul's Mind]";
	mes "ถ้าเจ้า...สามารถ...ทำมันได้...ข้าสามารถ...ให้...เจ้า...อะไร...ก็ได้...ที่เจ้าต้องการ...";
	next;
	setarray .@item_name$[0],
		getitemname(18971),	// Old_Rune_Circlet
		getitemname(18972),	// Old_Mitra
		getitemname(18973),	// Old_Driver_Band_R
		getitemname(18974),	// Old_Driver_Band_Y
		getitemname(18975),	// Old_Shadow_Handicraft
		getitemname(18976),	// Old_Minstrel_Song_Hat
		getitemname(18977),	// Old_Midas_Whisper
		getitemname(18978),	// Old_Magic_Stone_Hat
		getitemname(18979),	// Old_Blazing_Soul
		getitemname(18980),	// Old_Wind_Whisper
		getitemname(18981),	// Old_Dying_Swan
		getitemname(18984),	// Old_Camo_RabbitHood
		getitemname(18982),	// Old_Circlet_Of_Bone
		getitemname(18983),	// Old_Protect_Of_Crown
		getitemname(20749);	// Cloak of the Fallen Soldier[1]
	while(true) {
		if (checkweight(2677,5) == 0) {
			mes "[Sorrowful Soul's Mind]";
			mes "กระเป๋าเป้ของคุณ .. ";
			mes "เต็มไปหมด ... ";
			close;
		}
		if (select( "ส่งมอบ soul.", "จบการสนทนา." ) == 2) {
			mes "[Sorrowful Soul's Mind]";
			mes "...ข้าจะรอ...เจ้า...กลับมา...หาข้าอีกครั้ง...";
			close;
		}
		mes "[Sorrowful Soul's Mind]";
		mes "ถ้าเจ้าส่งมอบ...เหล่า soul มา...ข้าจะสร้างของบางอย่าง...ที่เต็มไปด้วย...พลังพิเศษ..ที่ผสมเข้าด้วยกัน...";
		mes "เจ้า...ต้องการ...อะไร ?...";
		while(true) {
			next;
			switch( select( "กลับไปที่เมนูก่อนหน้า", .@item_name$[0], .@item_name$[1], .@item_name$[2], .@item_name$[3], .@item_name$[4], .@item_name$[5], .@item_name$[6], .@item_name$[7], .@item_name$[8], .@item_name$[9], .@item_name$[10], .@item_name$[11], .@item_name$[12], .@item_name$[13], .@item_name$[14] + "[1]" ) ) {
			case 1:
				break;
			case 2:
				mes "- " + .@item_name$[0] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1, MDEF+ 5^000000";
				mes "^006400เพิ่ม ATK + 4 ต่อ 1 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ASPD + 1 ต่อ 5 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Ignition Break ขึ้น 20%^000000";
				mes "^006400ต่อ 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Hundred Spear ขึ้น 15%^000000";
				mes "^006400ต่อ 2 เลเวลตีบวก^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Rune Knight^000000";
				callsub S_Make,
					18971,	// Old_Rune_Circlet
					19961,	// C_Rune_Circlet
					6814;	// Swordman_Soul
				continue;
			case 3:
				mes "- " + .@item_name$[1] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1, MDEF+ 5^000000";
				mes "^006400เพิ่ม MATK + 2, ATK + 4, Heal Amount + 2% ต่อ 1 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Judex ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Magnus Exorcismus ขึ้น 10% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Archbishop^000000";
				callsub S_Make,
					18972,	// Old_Mitra
					19962,	// C_Mitra
					6819;	// Acolyte_Soul
				continue;
			case 4:
				mes "- " + .@item_name$[2] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ATK + 4 ต่อ 1 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ASPD + 1 ต่อ 5 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Power Swing ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Axe Tornado ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Mechanic^000000";
				callsub S_Make,
					18973,	// Old_Driver_Band_R
					19963,	// C_Driver_Band_R
					6815;	// Merchant_Soul
				continue;
			case 5:
				mes "- " + .@item_name$[3] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ATK + 4 ต่อ 1 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ASPD + 1 ต่อ 5 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Arm Cannon ขึ้น 5% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ลด คูลดาวน์ Suicidal Destruction ลง 10 วินาที ต่อ 4 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Mechanic^000000";
				callsub S_Make,
					18974,	// Old_Driver_Band_Y
					19964,	// C_Driver_Band_Y
					6815;	// Merchant_Soul
				continue;
			case 6:
				mes "- " + .@item_name$[4] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ATK + 4, MATK + 4 ทุก เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Triangle Shot ขึ้น 25% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ลด คูลดาวน์ Masquerade-unlock key, Enervation ลง 1 วินาที เมื่อเลเวลตีบวกถึง 6.^000000";
				mes "^006400ลด คูลดาวน์ Masquerade-Laziness, Weakness ลง 1 วินาที เมื่อเลเวลตีบวกถึง 8.^000000";
				mes "^006400ลด คูลดาวน์ Masquerade-Ignorance, Gloomy ลง 1 วินาที เมื่อเลเวลตีบวกถึง 10.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Shadow_Chaser^000000";
				callsub S_Make,
					18975,	// Old_Shadow_Handicraft
					19965,	// C_Shadow_Handicraft
					6816;	// Thief_Soul
				continue;
			case 7:
				mes "- " + .@item_name$[5] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ความแรง ranged physical ขึ้น 1% ทุก เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Arrow Vulcan ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Severe Rainstorm ขึ้น 5% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Minstrel^000000";
				callsub S_Make,
					18976,	// Old_Minstrel_Song_Hat
					19966,	// C_Minstrel_Song_Hat
					6818;	// Archer_Soul
				continue;
			case 8:
				mes "- " + .@item_name$[6] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ATK + 4 ต่อ 1 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ranged physical ขึ้น 1% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Cart Cannon ขึ้น 15% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Generic^000000";
				callsub S_Make,
					18977,	// Old_Midas_Whisper
					19967,	// C_Midas_Whisper
					6815;	// Merchant_Soul
				continue;
			case 9:
				mes "- " + .@item_name$[7] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1 MDEF+ 5^000000";
				mes "^006400เพิ่ม SP regen ขึ้น 20%.^000000";
				mes "^006400เพิ่ม MATK + 1% ทุก เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Soul Expansion ขึ้น 5% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ลด คูลดาวน์ Crimson Rock ลง 1 วินาที.^000000";
				mes "^006400ลด คูลดาวน์ Crimson Rock ลง 0.1 ทุก เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Warlock^000000";
				callsub S_Make,
					18978,	// Old_Magic_Stone_Hat
					19968,	// C_Magic_Stone_Hat
					6817;	// Mage_Soul
				continue;
			case 10:
				mes "- " + .@item_name$[8] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ATK + 4, CRI + 2 ทุก เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Rampage Blaster ขึ้น 15% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Lightning Shot ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Sura^000000";
				callsub S_Make,
					18979,	// Old_Blazing_Soul
					19969,	// C_Blazing_Soul
					6819;	// Acolyte_Soul
				continue;
			case 11:
				mes "- " + .@item_name$[9] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1 MDEF+ 5.^000000";
				mes "^006400เพิ่ม MATK + 1%, ATK + 4 ทุก เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Poison Burst ขึ้น 15% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Varetyr Spear ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Sorcerer^000000";
				callsub S_Make,
					18980,	// Old_Wind_Whisper
					19970,	// C_Wind_Whisper
					6817;	// Mage_Soul
				continue;
			case 12:
				mes "- " + .@item_name$[10] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ranged physical ขึ้น 1% ทุก เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Arrow Vulcan ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Severe Rainstorm ขึ้น 5% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Wanderer^000000";
				callsub S_Make,
					18981,	// Old_Dying_Swan
					19971,	// C_Dying_Swan
					6818;	// Archer_Soul
				continue;
			case 13:
				mes "- " + .@item_name$[11] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ranged physical ขึ้น 1% ทุก เลเวลตีบวก.^000000";
				mes "^006400Complete evasion +1 ต่อ 3 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Cluster Bomb ขึ้น 15% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Warg Strike ขึ้น 10% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Ranger^000000";
				callsub S_Make,
					18984,	// Old_Camo_RabbitHood
					19974,	// C_Camouflage_RabbitHood
					6818;	// Archer_Soul
				continue;
			case 14:
				mes "- " + .@item_name$[12] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1^000000";
				mes "^006400เพิ่ม ความแรง critical ขึ้น 1% และ attack speed ทุก เลเวลตีบวก (ลด attack delay 1%)^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Cross Impact ขึ้น 10% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Cross Reaper Slash ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Guillotine_Cross^000000";
				callsub S_Make,
					18982,	// Old_Circlet_Of_Bone
					19973,	// C_Circlet_Of_Bone
					6816;	// Thief_Soul
				continue;
			case 15:
				mes "- " + .@item_name$[13] + " -";
				mes "^006400ไอเท็มนี้ไม่สามารถแลกเปลี่ยนกับแอคเค้าท์อื่นได้.^000000";
				mes "^006400All State + 1 MDEF+ 5.^000000";
				mes "^006400เพิ่ม ATK + 4 ต่อ 1 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ASPD + 1 ต่อ 5 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม MHP, MSP ขึ้น 1% ทุก 2 เลเวลตีบวก^000000";
				mes "^006400เพิ่ม ความแรง Cannon Spear ขึ้น 20% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400เพิ่ม ความแรง Over Brand ขึ้น 5% ต่อ 2 เลเวลตีบวก.^000000";
				mes "^006400ประเภท: หมวก ป้องกัน: 10^000000";
				mes "^006400ตำแหน่ง: ส่วนบน น้ำหนัก: 10^000000";
				mes "^006400ช่องว่าง: 1^000000";
				mes "^006400ต้องการเลเวล: 170 อาชีพ: Royal Guard^000000";
				callsub S_Make,
					18983,	// Old_Protect_Of_Crown
					19972,	// C_Protect_Of_Crown
					6814;	// Swordman_Soul
				continue;
			case 16:
				mes "- " + .@item_name$[14] + "[1] -";
				mes "^006400ผ้าคลุมในตำนานที่เคยมีคนสวมใส่^000000 ^006400ในการต่อสู้อย่างกล้าหาญและถูกฆ่าตายในสนามรบ.";
				mes "เพิ่ม MHP, MSP ขึ้น 1% ต่อ 2 เลเวลตีบวก";
				mes "ATK + 10 เมื่อตัวละครมีค่า STR จริง ถึง 90.";
				mes "(เพิ่ม ATK + 2 ทุก เลเวลตีบวก)";
				mes "MATK + 20 เมื่อตัวละครมีค่า INT จริง ถึง 90.";
				mes "(เพิ่ม MATK + 3 ทุก เลเวลตีบวก)";
				mes "เมื่อตัวละครมีค่า VIT จริง ถึง 90";
				mes "3% ค่าความต้านทานต่อการโจมตีปกติ";
				mes "(เพิ่ม 3% เมื่อเลเวลตีบวกถึง 8,";
				mes "เพิ่ม 4% เมื่อเลเวลตีบวกถึง 10)";
				mes "เมื่อตัวละครมีค่า AGI จริง ถึง 90";
				mes "เพิ่ม attack speed (3% attack delay reduction)";
				mes "(Attack delay ลดลง 1% ต่อ 2 เลเวลตีบวก)";
				mes "(เพิ่ม ASPD + 1 เมื่อเลเวลตีบวกถึง 10.)";
				mes "เมื่อตัวละครมีค่า DEX จริง ถึง 90";
				mes "เพิ่ม ranged attack power ขึ้น 3%";
				mes "(เพิ่ม 1% ต่อ 2 เลเวลตีบวก)";
				mes "เมื่อตัวละครมีค่า LUK จริง ถึง 90";
				mes "เพิ่ม ความแรง critical ขึ้น 5%.";
				mes "(เพิ่ม 1% ทุก เลเวลตีบวก)";
				mes "ประเภท: ผ้าคลุม ป้องกัน: 30";
				mes "น้ำหนัก: 60";
				mes "ช่องว่าง: 1";
				mes "ต้องการเลเวล: 170 อาชีพ: ทั้งหมด^000000";
				callsub S_Make,
					20749,	// Manteau_Of_Fallen_
					20748,	// Manteau_Of_Fallen
					6471,	// Goast_Chill
					true;
				continue;
			}
			break;
		}
	}

S_Make:
	.@reward_id = getarg(0);
	.@equipment_req = getarg(1);
	.@item_misc_req = getarg(2);
	if (getarg(3,0)) {
		setarray .@string$[0], "chill", "cloak";
		setarray .@material[0],20,100;	// chill, energy
	}
	else {
		setarray .@string$[0], "soul", "hat";
		setarray .@material[0],1,20;	// soul, energy
	}
	next;
	mes "[Sorrowful Soul's Mind]";
	mes "เพื่อที่จะทำ...^006400" + getitemname(.@reward_id) + "^000000...";
	mes "นำ...เหล่า " + .@string$[0] + ", " + .@string$[1] + "...ที่วนเวียน...อยู่ในที่ๆเต็มไปด้วย...พลังงานมืดมา...";
	next;
	mes "[Sorrowful Soul's Mind]";
	mes "ข้าต้องการ 1 " + getitemname(.@equipment_req) + ", " + .@material[0] + " " + getitemname(.@item_misc_req) + "..." + .@material[1] + " " + getitemname(6820) + "..";
	mes "ถ้าเก็บสะสม " + getitemname(6820) + " และ " + .@string$[0] + "ได้ 5 เท่า...เจ้า...จะไม่ล้มเหลว...";
	mes "เจ้า...จะทำ...แบบไหน ?";
	next;
	switch( select( "กลับไปที่เมนูก่อนหน้า", "ใช้ " + .@material[1] + " energies, " + .@material[0] + " " + .@string$[0], "ใช้ " + (.@material[1] * 5) + " energies, " + (.@material[0] * 5) + " " + .@string$[0] + "s" ) ) {
	case 1:
		mes "[Sorrowful Soul's Mind]";
		mes "ข้าหวังว่า...เจ้าสามารถ...ดู...สิ่งอื่น ๆ...ได้เช่นกัน...";
		return;
	case 2:
		.@rate = 1;
		break;
	case 3:
		.@rate = 5;
		break;
	}
	if (countitem(.@equipment_req) < 1 || countitem(.@item_misc_req) < (.@material[0] * .@rate) || countitem(6820) < (.@material[1] * .@rate)) {
		mes "[Sorrowful Soul's Mind]";
		mes "เจ้าไม่...มี...วัตถุดิบพอ...ที่จะทำ...^006400" + getitemname(.@reward_id) + "^000000...";
		return;
	}
	progressbar "000000",5;
	percentheal -50,-50;
	specialeffect2 EF_POISONSMOKE;
	specialeffect2 EF_NPC_BURNT;
	delitem .@equipment_req, 1;
	delitem .@item_misc_req, (.@material[0] * .@rate);
	delitem 6820, (.@material[1] * .@rate);// Energy Fragment

	if ((20*.@rate) > rand(100)) {
		specialeffect EF_BLACKBODY;
		specialeffect EF_GUMGANG4;
		specialeffect EF_DARKCASTING2;
		specialeffect EF_RG_COIN7;
		mes "[Sorrowful Soul's Mind]";
		mes "เอาไป...^006400" + getitemname(.@reward_id) + "^000000...";
		getitem .@reward_id,1;
	}
	else {
		specialeffect EF_POISONSMOKE;
		specialeffect EF_GUMGANG4;
		mes "[Sorrowful Soul's Mind]";
		mes "^006400" + getitemname(.@reward_id) + "^000000... ล้มเหลว...";
	}
	next;
	mes "- ข้าได้รับความเสียหายอย่างหนัก - - โดยคลื่นพลังงาน - - ได้ซึมสู่ร่างกายของข้า. -";
	next;
	mes "[Sorrowful Soul's Mind]";
	mes "มีอะไร...ที่ข้า...พอจะช่วย...เจ้าได้ไหม ?...";
	return;
}

// Exchange npcs - safe map (no mobs)
lhz_d_n2,53,49,4	duplicate(Silent Mind#JCv2)	Silent Mind#JCv2C	4_CENERE
lhz_d_n2,42,49,2	duplicate(Wandering Mind#JCv2)	Wandering Mind#JCv2C	4_CENERE
lhz_d_n2,51,53,4	duplicate(Victimized Soul's Mind#1)	Victimized Soul's Mind#1C	4_M_DEATH2
lhz_d_n2,44,53,6	duplicate(Sorrowful Soul's Mind#1)	Sorrowful Soul's Mind#1C	4_M_DEATH

// Safe map - Exit
lhz_d_n2,34,45,3	script	#lhzdw	1_SHADOW_NPC,{
	mes "[Bastets]";
	mes "เจ้าสามารถเห็นทางออกได้.";
	next;
	if (select( "กลับไปที่ Lighthalzen.", "ยังไม่กลับ." ) == 1)
		warp "lighthalzen",310,228;
	end;
}

// Heal
lhz_dun_n,167,259,2	script	A Questionable Device#l	4_SYSTEM_BOX,3,3,{
	if (isbegin_quest(14683) == 1) {
		mes "[System Message]";
		mes "โปรโตคอล ฉุกเฉิน เปิดใช้งาน. ผู้เล่นสามารถเดินเครื่อง RT-223 ได้.";
		next;
		if (select( "ไม่เดินเครื่อง.", "เดินเครื่อง." ) == 2) {
			mes "[System Message]";
			mes "ทุกคนควรปฏิบัติตามกฎฉุกเฉิน.";
			close;
		}
		specialeffect EF_MAPPILLAR;
		mes "[System Message]";
		mes "ผู้เล่นกำลังเดินเครื่อง RT-223. โหมดสแตนด์บายจะเปิดใช้งานหลังจากขั้นตอนนี้.";
		specialeffect2 EF_BABY;
		percentheal 100,100;
		completequest 14683;// Mysterious Device
		close;
	}
	end;

OnTouch:
	npctalk "ทุกคนควรปฏิบัติตามกฎฉุกเฉิน.", "", bc_self;
	end;

OnInit:
	questinfo( QTYPE_QUEST, QMARK_YELLOW, "isbegin_quest(14683) == 1" );
	end;
}

// Misc
lhz_dun_n,75,121,0	script	#Alphoccio_Basil_A1	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	specialeffect EF_BAT2;
	disablenpc strnpcinfo(0);
	initnpctimer;
	end;
OnTimer1000:
	.@npc_name$ = strnpcinfo(0);
	if (.@npc_name$ == "#Alphoccio_Basil_A1") {
		.@talker_name$ = "#lhz_dun_talk_A23"; 
		switch (rand(5)) {
			case 0:  .@msg$ = "เป็นความผิดพลาดของฉันที่คิดว่านี่จะเป็นแค่การเดินทาง..."; break;
			case 1:  .@msg$ = "ฮะ...แล้วไง..ก็ฟังเมีย..."; break;
			case 2:  .@msg$ = "พวกเขาทั้งหมดที่นี่เป็นอะไร?..ทำไมต้องตาแบบนี้.."; break;
			case 3:  .@msg$ = "ฉันได้ยินเสียงเพลงและเสียงเพลง..ฮ่าฮ่าฮ่า..."; break;
			default:  .@msg$ = "ฉันอยู่ที่ไหน..มีทางออกหรือไม่.."; break;
		}
	}
	else if (.@npc_name$ == "#Alphoccio_Basil_A2") {
		.@talker_name$ = "#lhz_dun_talk_A24";
		switch (rand(5)) {
			case 0:  .@msg$ = "ฉันคิดว่าเราจะทำเพลงและเดินทางรอบโลกได้ตลอดไป..."; break;
			case 1:  .@msg$ = "ไม่สำคัญว่าเราจะอยู่ที่ไหนในขณะที่คุณอยู่ใกล้ฉัน..."; break;
			case 2:  .@msg$ = "Trentini...คุณอยู่ที่ไหน..."; break;
			case 3:  .@msg$ = "เสียงของเพลงกำลังจางหายไป..."; break;
			default:  .@msg$ = "แล้วตอนนี้...จะเหลืออะไรให้ฉันบ้าง.."; break;
		}
	}
	else if (.@npc_name$ == "#Catherine Cheiron_A1") {
		.@talker_name$ = "#lhz_dun_talk_A5";
		switch (rand(5)) {
			case 0:  .@msg$ = "มันเป็นเคล็ดลับที่แปลกมาก..."; break;
			case 1:  .@msg$ = "Sob sob...Somebody...Please.."; break;
			case 2:  .@msg$ = "หนาวจัง...ที่นี่...เป็นโกดังหรือเปล่า.."; break;
			case 3:  .@msg$ = "เสียงของฉัน...จะไม่ออกมา..."; break;
			default:  .@msg$ = "เพื่อน...ฉันกลัว..."; break;
		}
	}
	else if (.@npc_name$ == "#Katrinn Chiron_A2") {
		.@talker_name$ = "#lhz_dun_talk_A6";
		switch (rand(5)) {
			case 0:  .@msg$ = "เซย์เรน...เธออยู่ไหน..."; break;
			case 1:  .@msg$ = "ความเจ็บปวด...ความมืด...ฉันกลัว..."; break;
			case 2:  .@msg$ = "เวทมนตร์ที่ยากมากสำหรับฉันที่จะเรียนรู้ตอนนี้มันไร้ประโยชน์..."; break;
			case 3:  .@msg$ = "พวกที่ไม่ใช่มนุษย์..."; break;
			default:  .@msg$ = "เพื่อน...มืดเกินไป..."; break;
		}
	}
	else if (.@npc_name$ == "#Celia_Alde_A1") {
		.@talker_name$ = "#lhz_dun_talk_A17";
		switch (rand(5)) {
			case 0:  .@msg$ = "อึ...บ้าไปแล้ว...ทั้งหมดนี้..."; break;
			case 1:  .@msg$ = "ฉันไม่แน่ใจว่าฉันสามารถบอกได้ว่าใคร..."; break;
			case 2:  .@msg$ = "จิตวิญญาณที่น่าสงสารที่นี่...อาจเป็น..."; break;
			case 3:  .@msg$ = "นี่มันไร้สาระ...มันจะเกิดขึ้นได้ยังไง..?"; break;
			default:  .@msg$ = "ย้ำ...นี่มันเกินความสามารถในการวิเคราะห์ของฉัน...เป็นไปไม่ได้..."; break;
		}
	}
	else if (.@npc_name$ == "#Celia_Alde_A2") {
		.@talker_name$ = "#lhz_dun_talk_A18";
		switch (rand(4)) {
			case 0:  .@msg$ = "ไม่มีใครอยู่...คืออะไร..."; break;
			case 1:  .@msg$ = "My...survival...and escape...analyzis results..."; break;
			case 2:  .@msg$ = "Where...what...No, no...Never..."; break;
			default:  .@msg$ = "ฉันอยากออกไปจากที่นี่ให้เร็วที่สุด..."; break;
		}
	}
	else if (.@npc_name$ == "#Chen_Liu_A1") {
		.@talker_name$ = "#lhz_dun_talk_A19";
		switch (rand(5)) {
			case 0:  .@msg$ = "หัวของฉันรู้สึกแปลก ๆ..."; break;
			case 1:  .@msg$ = "สถานที่นี้ดูเหมือนกับห้องใต้ดินที่ถูกทิ้งร้าง..."; break;
			case 2:  .@msg$ = "มีแผลที่หน้าอก...มีอะไร..."; break;
			case 3:  .@msg$ = "ฉันกำลังจะเสียตัว..."; break;
			default:  .@msg$ = "ฉันเป็นพระ...ตัวแทนแห่งการลงโทษจากสวรรค์..."; break;
		}
	}
	else if (.@npc_name$ == "#Chen_Liu_A2") {
		.@talker_name$ = "#lhz_dun_talk_A20";
		switch (rand(4)) {
			case 0:  .@msg$ = "ใบหน้าของศัตรู...นั่นคือใบหน้าของเพื่อนร่วมงาน..."; break;
			case 1:  .@msg$ = "St Capitolina Abbey...ยังมีงานที่ต้องทำ..."; break;
			case 2:  .@msg$ = "แผลของฉันถูกเย็บ...พวกเขาทำอะไรให้ฉันได้บ้าง.."; break;
			default:  .@msg$ = "พลังศักดิ์สิทธิ์...พลังใจ..."; break;
		}
	}
	else if (.@npc_name$ == "#Eremes_Guille_A1") {
		.@talker_name$ = "#lhz_dun_talk_A7";
		switch (rand(5)) {
			case 0:  .@msg$ = "มุ่งเน้นไปที่การเอาชีวิตรอด..."; break;
			case 1:  .@msg$ = "ฉันแบกยอดกิโยตินฉันต้องรอด!.."; break;
			case 2:  .@msg$ = "อย่ายอมแพ้...จำภารกิจ..."; break;
			case 3:  .@msg$ = "ทางออกไม่ใกล้เลย...ไม่เห็น..."; break;
			default:  .@msg$ = "ทั้งหมดนี้...ถูกวางแผนอย่างพิถีพิถันแน่นอน..."; break;
		}
	}
	else if (.@npc_name$ == "#Eremes_Guille_A2") {
		.@talker_name$ = "#lhz_dun_talk_A8";
		switch (rand(5)) {
			case 0:  .@msg$ = "Katrinn ไม่เป็นไร...ฉันต้องปกป้อง..."; break;
			case 1:  .@msg$ = "ฉันต้องทำภารกิจให้สำเร็จ...คำสั่งของฉัน..."; break;
			case 2:  .@msg$ = "Assasin Guild รอฉัน..."; break;
			case 3:  .@msg$ = "ฉันไม่อยากจะเชื่อเลยว่าฉันตกหลุมพรางเช่นนี้..."; break;
			default:  .@msg$ = "ดวงตาของฉันมัว...ฉันจะไม่นาน..."; break;
		}
	}
	else if (.@npc_name$ == "#Flamel_Emule_A1") {
		.@talker_name$ = "#lhz_dun_talk_A15";
		switch (rand(5)) {
			case 0:  .@msg$ = "ฉันไม่เคยรู้สึกหมดหนทางมาก่อน..."; break;
			case 1:  .@msg$ = "Celia...ฉันกลัว..."; break;
			case 2:  .@msg$ = "ร่างกายของฉันเต็มไปด้วยรอยแผลเป็นจากการผ่าตัด..."; break;
			case 3:  .@msg$ = "ไม่มีใครปรากฏตัว...ไม่มีใคร...ที่นี่..."; break;
			default:  .@msg$ = "ฉันทนได้..."; break;
		}
	}
	else if (.@npc_name$ == "#Flamel_Emule_A2") {
		.@talker_name$ = "#lhz_dun_talk_A16";
		switch (rand(5)) {
			case 0:  .@msg$ = "ครอบครัวของฉัน...นักพันธุศาสตร์...จะต้องอับอาย..."; break;
			case 1:  .@msg$ = "ฉันรู้สึกเหมือน...สติของฉัน...ไม่ใช่ตัวฉันอีกต่อไป..."; break;
			case 2:  .@msg$ = "สติของฉัน...กำลังเลือนลาง..."; break;
			case 3:  .@msg$ = "ตอนนี้กำลังเหลืออยู่..."; break;
			default:  .@msg$ = "ร่างกายของฉัน...อะไร...ไม่มีทาง..."; break;
		}
	}
	else if (.@npc_name$ == "#Gertie_Wie_A1") {
		.@talker_name$ = "#lhz_dun_talk_A21";
		switch (rand(4)) {
			case 0:  .@msg$ = "เราถูกใช้..."; break;
			case 1:  .@msg$ = "คุณกำลังทำอะไรอยู่..."; break;
			case 2:  .@msg$ = "มันกว้างเกินไป...มองไม่เห็นทางออกเลย..."; break;
			default:  .@msg$ = "ฮะ...โชคร้าย..."; break;
		}
	}
	else if (.@npc_name$ == "#Gertie_Wie_A2") {
		.@talker_name$ = "#lhz_dun_talk_A22";
		switch (rand(5)) {
			case 0:  .@msg$ = "ฉันควรจะได้รับเงินมากกว่านี้ถ้าฉันรู้ว่ามันจะเกิดขึ้น..."; break;
			case 1:  .@msg$ = "แก้มฉันแสบ...ไม่ว่าจะเกิดอะไรขึ้นกับเรา...มันใช่..."; break;
			case 2:  .@msg$ = "อายุของฉันหมดแล้ว...เด็ก ๆ...จะเติบโตเป็นนักรบ..."; break;
			case 3:  .@msg$ = "ฉันจะดูอย่างระมัดระวัง...ฉันควรจะจำ..."; break;
			default:  .@msg$ = "ถ้าเรารู้ว่ามันจะเกิดขึ้นและเราจะได้สิ่งนี้..."; break;
		}
	}
	else if (.@npc_name$ == "#Harword_AltEisen_A1") {
		.@talker_name$ = "#lhz_dun_talk_A9";
		switch (rand(5)) {
			case 0:  .@msg$ = "ตอนนี้ร่างกายของฉันเคลื่อนไหวอะไร...มันเป็นความประสงค์ของฉันจริงๆ.."; break;
			case 1:  .@msg$ = "ที่นี่อยู่ที่ไหน?..ฉันไม่ได้บอกอะไรเลย..."; break;
			case 2:  .@msg$ = "ฉันจะไม่ไปไหน...ฉันจะอยู่เคียงข้างคุณ..."; break;
			case 3:  .@msg$ = "ฉันต้องมองหาเซซิลน้องสาวของฉัน...ไม่ว่าจะเกิดอะไรขึ้น..."; break;
			default:  .@msg$ = "อันตราย...จิตใจของฉันดับลง..."; break;
		}
	}
	else if (.@npc_name$ == "#Harword Alt-Eisen_A2") {
		.@talker_name$ = "#lhz_dun_talk_A10";
		switch (rand(3)) {
			case 0:  .@msg$ = "ฉันมองไม่เห็นอนาคตของตัวเองอีกต่อไป..."; break;
			case 1:  .@msg$ = "ตาของฉัน...แค่ปิด..."; break;
			default:  .@msg$ = "ไอ้มัน...ซี้ดดดดดดดด..."; break;
		}
	}
	else if (.@npc_name$ == "#Magaleta_Sorin_A1") {
		.@talker_name$ = "#lhz_dun_talk_A3";
		switch (rand(5)) {
			case 0:  .@msg$ = "Dear Odin...ขอให้ Seyren เป็น..."; break;
			case 1:  .@msg$ = "ทั้งหมดนี้ทำให้ฉันกลัว..."; break;
			case 2:  .@msg$ = "นั่นไม่ใช่ความประสงค์ของฉัน...นี่ไม่ใช่ฉัน..."; break;
			case 3:  .@msg$ = "พลังศักดิ์สิทธิ์รักษาเลือดดำไม่ได้..."; break;
			default:  .@msg$ = "Dear Odin...May we...May he..."; break;
		}
	}
	else if (.@npc_name$ == "#Magaleta_Sorin_A2") {
		.@talker_name$ = "#lhz_dun_talk_A4";
		switch (rand(4)) {
			case 0:  .@msg$ = "ถึงโอดินที่รักขอเหลือกำลังของข้าไว้..."; break;
			case 1:  .@msg$ = "ร่างกายของฉันสูญเสียความแข็งแกร่ง..."; break;
			case 2:  .@msg$ = "พลังศักดิ์สิทธิ์อ่อนแอลงเรื่อย ๆ..."; break;
			default:  .@msg$ = "My Seyren...คุณอยู่ที่ไหน..."; break;
		}
	}
	else if (.@npc_name$ == "#Randel_Lawrence_A1") {
		.@talker_name$ = "#lhz_dun_talk_A13";
		switch (rand(4)) {
			case 0:  .@msg$ = "ฉันถูกส่งมาที่นี่ในฐานะผู้บัญชาการ..."; break;
			case 1:  .@msg$ = "ตอนนี้มันเป็นไปไม่ได้...จริงๆ..."; break;
			case 2:  .@msg$ = "ฉันจะแสดงพลังของพาลาดิน..."; break;
			default:  .@msg$ = "ลูกเรือของฉันอยู่ที่ไหน..."; break;
		}
	}
	else if (.@npc_name$ == "#Randel_Lawrence_A2") {
		.@talker_name$ = "#lhz_dun_talk_A14";
		switch (rand(5)) {
			case 0:  .@msg$ = "ส่งลูกเรือ...ถ้าพวกคุณรอด...คุณต้องออกจากสิ่งนี้...นี่คือคำสั่ง..."; break;
			case 1:  .@msg$ = "พลังของฉันหายไปแล้ว..."; break;
			case 2:  .@msg$ = "นั่นคืออะไร..กำลังเปลี่ยน..."; break;
			case 3:  .@msg$ = "ฉันเป็นผู้รอดชีวิตคนสุดท้ายที่นี่หรือ.."; break;
			default:  .@msg$ = "ฉันร่วงหล่นหรือไม่มันมืดต่อหน้าฉัน..."; break;
		}
	}
	else if (.@npc_name$ == "#Seyren_Windsor_A1") {
		.@talker_name$ = "#lhz_dun_talk_A1";
		switch (rand(4)) {
			case 0:  .@msg$ = "ฉันต้องหาเพื่อน...ฉันต้อง..."; break;
			case 1:  .@msg$ = "โซรินอยู่ไหน..เพื่อนฉันสบายดีไหม.."; break;
			case 2:  .@msg$ = "มีผู้ทรยศในหมู่ผู้นำของเรา...ไม่มีใครปลอดภัยที่จะบอกกับ..."; break;
			default:  .@msg$ = "พ่อของฉันควรได้รับแจ้งเรื่องนี้..."; break;
		}
	}
	else if (.@npc_name$ == "#Seyren_Windsor_A2") {
		.@talker_name$ = "#lhz_dun_talk_A2";
		switch (rand(5)) {
			case 0:  .@msg$ = "ฉันรู้สึกผิด..."; break;
			case 1:  .@msg$ = "ฉันคือวินด์เซอร์บุตรแห่งเกียรติยศฉันจะไม่ทำให้ชื่อของฉันเป็นมลทิน..."; break;
			case 2:  .@msg$ = "ต้องหนีจากพวกเขา...สิ่งนี้ไม่ควร..."; break;
			case 3:  .@msg$ = "เราไม่สามารถตายในสถานที่เช่นนี้..."; break;
			default:  .@msg$ = "ที่รัก...Margaretha..."; break;
		}
	}
	else if (.@npc_name$ == "#Shecil_Damon_A1") {
		.@talker_name$ = "#lhz_dun_talk_A11";
		switch (rand(5)) {
			case 0:  .@msg$ = "ใจเย็น ๆ...ไม่เป็นไร..."; break;
			case 1:  .@msg$ = "โถงทางเดินนี้ไม่ใช่ทางออกด้วย..."; break;
			case 2:  .@msg$ = "ฉันจะมา...รอฉันโซริน..."; break;
			case 3:  .@msg$ = "ฉันกลัว...มาก...กลัว..."; break;
			default:  .@msg$ = "ฉันยังมีธนูและลูกศรอยู่..."; break;
		}
	}
	else if (.@npc_name$ == "#Shecil_Damon_A2") {
		.@talker_name$ = "#lhz_dun_talk_A12";
		switch (rand(5)) {
			case 0:  .@msg$ = "ฉันตายแบบนี้ที่นี่ไม่ได้..."; break;
			case 1:  .@msg$ = "โซริน...ไปไหน..."; break;
			case 2:  .@msg$ = "เพื่อน...นั่นคือสิ่งที่ฉันคิดถึง..."; break;
			case 3:  .@msg$ = "ในช่องนั้นคืออะไร..จะเกิดขึ้นที่ไหน..?"; break;
			default:  .@msg$ = "ฉันทำได้...มันยังไม่จบ..."; break;
		}
	}
	else if (.@npc_name$ == "#Trentini_A1") {
		.@talker_name$ = "#lhz_dun_talk_A25";
		switch (rand(5)) {
			case 0:  .@msg$ = "ฉันรู้สึกได้ว่าเขาอยู่ที่ไหน..."; break;
			case 1:  .@msg$ = "ฉันจะทำยังไงดี?..ปวดหัวเหลือเกิน..."; break;
			case 2:  .@msg$ = "มันเป็นความผิดของฉันเอง...ฉันจะเลิกกับ Alphoccio ในที่สุด..."; break;
			case 3:  .@msg$ = "มันจบแล้วมันคือการกดขี่...นั่นคือผลลัพธ์..."; break;
			default:  .@msg$ = "ฉันคิดถึงคุณ...มาก..."; break;
		}
	}
	else if (.@npc_name$ == "#Trentini_A2") {
		.@talker_name$ = "#lhz_dun_talk_A26";
		switch (rand(4)) {
			case 0:  .@msg$ = "มีใครอยู่มั้ยคะ..เพื่อนขอ...อ๊ะ..."; break;
			case 1:  .@msg$ = "เผือกอ่านแล้วสยอง..."; break;
			case 2:  .@msg$ = "ฉันชอบทุกเสียงของพวกเขามาก..."; break;
			default: .@msg$ = "ร่างกายของฉันจะไม่ขยับเลย..."; break;
		}
	}
	npctalk .@msg$, .@talker_name$;
	end;
OnTimer40000:
	stopnpctimer;
	enablenpc strnpcinfo(0);
	end;
}

lhz_dun_n,92,102,0	duplicate(#Alphoccio_Basil_A1)	#Alphoccio_Basil_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,150,74,0	duplicate(#Alphoccio_Basil_A1)	#Catherine Cheiron_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,174,98,0	duplicate(#Alphoccio_Basil_A1)	#Katrinn Chiron_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,25,65,0	duplicate(#Alphoccio_Basil_A1)	#Celia_Alde_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,60,102,0	duplicate(#Alphoccio_Basil_A1)	#Celia_Alde_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,194,188,0	duplicate(#Alphoccio_Basil_A1)	#Chen_Liu_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,255,206,0	duplicate(#Alphoccio_Basil_A1)	#Chen_Liu_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,81,184,0	duplicate(#Alphoccio_Basil_A1)	#Eremes_Guille_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,113,191,0	duplicate(#Alphoccio_Basil_A1)	#Eremes_Guille_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,84,87,0	duplicate(#Alphoccio_Basil_A1)	#Flamel_Emule_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,39,55,0	duplicate(#Alphoccio_Basil_A1)	#Flamel_Emule_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,232,198,0	duplicate(#Alphoccio_Basil_A1)	#Gertie_Wie_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,130,148,0	duplicate(#Alphoccio_Basil_A1)	#Gertie_Wie_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,119,195,0	duplicate(#Alphoccio_Basil_A1)	#Harword Alt-Eisen_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,158,210,0	duplicate(#Alphoccio_Basil_A1)	#Harword Alt-Eisen_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,159,122,0	duplicate(#Alphoccio_Basil_A1)	#Magaleta_Sorin_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,133,39,0	duplicate(#Alphoccio_Basil_A1)	#Magaleta_Sorin_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,168,193,0	duplicate(#Alphoccio_Basil_A1)	#Randel_Lawrence_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,188,188,0	duplicate(#Alphoccio_Basil_A1)	#Randel_Lawrence_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,44,155,0	duplicate(#Alphoccio_Basil_A1)	#Seyren Windsor_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,54,221,0	duplicate(#Alphoccio_Basil_A1)	#Seyren Windsor_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,249,66,0	duplicate(#Alphoccio_Basil_A1)	#Shecil_Damon_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,213,97,0	duplicate(#Alphoccio_Basil_A1)	#Shecil_Damon_A2	HIDDEN_WARP_NPC,3,3
lhz_dun_n,191,129,0	duplicate(#Alphoccio_Basil_A1)	#Trentini_A1	HIDDEN_WARP_NPC,3,3
lhz_dun_n,259,132,0	duplicate(#Alphoccio_Basil_A1)	#Trentini_A2	HIDDEN_WARP_NPC,3,3

lhz_dun_n,44,155,6	script	#lhz_dun_talk_A1	CLEAR_NPC,{ end; }
lhz_dun_n,54,221,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A2	CLEAR_NPC
lhz_dun_n,159,122,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A3	CLEAR_NPC
lhz_dun_n,133,39,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A4	CLEAR_NPC
lhz_dun_n,150,74,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A5	CLEAR_NPC
lhz_dun_n,174,98,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A6	CLEAR_NPC
lhz_dun_n,81,184,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A7	CLEAR_NPC
lhz_dun_n,113,191,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A8	CLEAR_NPC
lhz_dun_n,119,195,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A9	CLEAR_NPC
lhz_dun_n,158,210,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A10	CLEAR_NPC
lhz_dun_n,249,66,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A11	CLEAR_NPC
lhz_dun_n,213,97,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A12	CLEAR_NPC
lhz_dun_n,168,193,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A13	CLEAR_NPC
lhz_dun_n,188,188,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A14	CLEAR_NPC
lhz_dun_n,84,87,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A15	CLEAR_NPC
lhz_dun_n,39,55,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A16	CLEAR_NPC
lhz_dun_n,25,65,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A17	CLEAR_NPC
lhz_dun_n,60,102,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A18	CLEAR_NPC
lhz_dun_n,194,188,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A19	CLEAR_NPC
lhz_dun_n,255,206,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A20	CLEAR_NPC
lhz_dun_n,232,198,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A21	CLEAR_NPC
lhz_dun_n,130,148,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A22	CLEAR_NPC
lhz_dun_n,75,121,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A23	CLEAR_NPC
lhz_dun_n,92,102,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A24	CLEAR_NPC
lhz_dun_n,191,129,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A25	CLEAR_NPC
lhz_dun_n,259,132,6	duplicate(#lhz_dun_talk_A1)	#lhz_dun_talk_A26	CLEAR_NPC

// npc location -> quest ID inaccurate
lhz_dun_n,132,61,2	script	A Questionable Device#14684	4_SYSTEM_BOX,5,5,{
	end;
OnTouch:
	.@quest_id = atoi(strnpcinfo(2));
	switch( checkquest(.@quest_id,PLAYTIME) ) {
	case -1:
		break;
	case 0:
	case 1:
		npctalk "...ปัจจุบัน...ต้องการ...เวลา..คูล..ดาวน์..";
		end;
	case 2:
		erasequest .@quest_id;
		break;
	}
	specialeffect EF_MAPPILLAR;
	npctalk "โปรโตคอล ฉุกเฉิน...เปิดใช้..ที่..RT..017...คูลดาวน์...1 ชั่วโมง......";
	specialeffect2 EF_BABY;
	setquest .@quest_id;// Mysterious Device
	switch( .@quest_id ) {
	case 14684:
		// atk dmg+10%, def+10% on monsters (inaccurates, unknown values)
		// atk+: Swordman, Thief / def+: Acolyte, Merchant
		sc_start2 SC_LHZ_DUN_N1,1800000,10,10,10000,SCSTART_NOTICKDEF;	/// last 30 mins
		break;
	case 14685:
		// atk+: Acolyte, Merchant / def+: Mage, Archer
		sc_start2 SC_LHZ_DUN_N2,1800000,10,10,10000,SCSTART_NOTICKDEF;
		break;
	case 14686:
		// atk+: Mage, Archer / def+: Swordman, Thief
		sc_start2 SC_LHZ_DUN_N3,1800000,10,10,10000,SCSTART_NOTICKDEF;
		break;
	case 14687:
		// atk+: MvPs / def+: MvPs
		sc_start2 SC_LHZ_DUN_N4,1800000,10,10,10000,SCSTART_NOTICKDEF;
		break;
	}
	end;

OnInit:
	.@condition$ = "!isbegin_quest(" + strnpcinfo(2) + ")";
	questinfo( QTYPE_QUEST, QMARK_YELLOW, .@condition$ );
	end;
}

lhz_dun_n,53,127,2	duplicate(A Questionable Device#14684)	A Questionable Device#14685	4_SYSTEM_BOX,5,5
lhz_dun_n,214,127,2	duplicate(A Questionable Device#14684)	A Questionable Device#14686	4_SYSTEM_BOX,5,5
lhz_dun_n,148,148,2	duplicate(A Questionable Device#14684)	A Questionable Device#14687	4_SYSTEM_BOX,5,5

/*
// Unknown effects
lhz_dun_n,130,204,2	script	Dead Man#lhzd01	4_TOWER_06,5,5
lhz_dun_n,78,133,2	script	Dead Man#lhzd02	4_TOWER_06,5,5
lhz_dun_n,47,65,2	script	Dead Man#lhzd03	4_TOWER_06,5,5
lhz_dun_n,141,39,2	script	Dead Man#lhzd04	4_TOWER_06,5,5
lhz_dun_n,123,85,2	script	Dead Man#lhzd05	4_TOWER_06,5,5
lhz_dun_n,212,71,2	script	Dead Man#lhzd06	4_TOWER_06,5,5
lhz_dun_n,213,109,2	script	Dead Man#lhzd07	4_TOWER_06,5,5
lhz_dun_n,145,179,2	script	Dead Man#lhzd08	4_TOWER_06,5,5
lhz_dun_n,233,135,2	script	Dead Man#lhzd09	4_TOWER_06,5,5
lhz_dun_n,241,201,2	script	Dead Man#lhzd10	4_TOWER_06,5,5
lhz_dun_n,150,211,2	script	Dead Man#lhzd11	4_TOWER_03,5,5
lhz_dun_n,69,144,2	script	Dead Man#lhzd12	4_TOWER_03,5,5
lhz_dun_n,113,81,2	script	Dead Man#lhzd13	4_TOWER_03,5,5
lhz_dun_n,144,64,2	script	Dead Man#lhzd14	4_TOWER_03,5,5
lhz_dun_n,157,93,2	script	Dead Man#lhzd15	4_TOWER_03,5,5
lhz_dun_n,231,69,2	script	Dead Man#lhzd16	4_TOWER_03,5,5
lhz_dun_n,179,107,2	script	Dead Man#lhzd17	4_TOWER_03,5,5
lhz_dun_n,172,175,2	script	Dead Man#lhzd18	4_TOWER_03,5,5
lhz_dun_n,228,149,2	script	Dead Man#lhzd19	4_TOWER_03,5,5
lhz_dun_n,248,218,2	script	Dead Man#lhzd20	4_TOWER_03,5,5
lhz_dun_n,139,233,2	script	Dead Man#lhzd21	4_TOWER_08,5,5
lhz_dun_n,69,110,2	script	Dead Man#lhzd22	4_TOWER_08,5,5
lhz_dun_n,100,109,2	script	Dead Man#lhzd23	4_TOWER_08,5,5
lhz_dun_n,137,72,2	script	Dead Man#lhzd24	4_TOWER_08,5,5
lhz_dun_n,169,85,2	script	Dead Man#lhzd25	4_TOWER_08,5,5
lhz_dun_n,245,63,2	script	Dead Man#lhzd26	4_TOWER_08,5,5
lhz_dun_n,182,126,2	script	Dead Man#lhzd27	4_TOWER_08,5,5
lhz_dun_n,182,154,2	script	Dead Man#lhzd28	4_TOWER_08,5,5
lhz_dun_n,246,141,2	script	Dead Man#lhzd29	4_TOWER_08,5,5
lhz_dun_n,236,226,2	script	Dead Man#lhzd30	4_TOWER_08,5,5
lhz_dun_n,38,200,2	script	Dead Man#lhzd31	4_TOWER_11,5,5
lhz_dun_n,95,86,2	script	Dead Man#lhzd32	4_TOWER_11,5,5
lhz_dun_n,98,138,2	script	Dead Man#lhzd33	4_TOWER_11,5,5
lhz_dun_n,145,89,2	script	Dead Man#lhzd34	4_TOWER_11,5,5
lhz_dun_n,186,92,2	script	Dead Man#lhzd35	4_TOWER_11,5,5
lhz_dun_n,181,148,2	script	Dead Man#lhzd36	4_TOWER_11,5,5
lhz_dun_n,181,148,2	script	Dead Man#lhzd37	4_TOWER_11,5,5
lhz_dun_n,203,144,2	script	Dead Man#lhzd38	4_TOWER_11,5,5
lhz_dun_n,240,134,2	script	Dead Man#lhzd39	4_TOWER_11,5,5
lhz_dun_n,141,129,2	script	Dead Man#lhzd40	4_TOWER_11,5,5
lhz_dun_n,81,160,2	script	Dead Man#lhzd41	4_TOWER_13,5,5
lhz_dun_n,41,77,2	script	Dead Man#lhzd42	4_TOWER_13,5,5
lhz_dun_n,99,162,2	script	Dead Man#lhzd43	4_TOWER_13,5,5
lhz_dun_n,136,95,2	script	Dead Man#lhzd44	4_TOWER_13,5,5
lhz_dun_n,184,80,2	script	Dead Man#lhzd45	4_TOWER_13,5,5
lhz_dun_n,202,102,2	script	Dead Man#lhzd46	4_TOWER_13,5,5
lhz_dun_n,157,143,2	script	Dead Man#lhzd47	4_TOWER_13,5,5
lhz_dun_n,202,133,2	script	Dead Man#lhzd48	4_TOWER_13,5,5
lhz_dun_n,220,178,2	script	Dead Man#lhzd49	4_TOWER_13,5,5
lhz_dun_n,131,148,2	script	Dead Man#lhzd50	4_TOWER_13,5,5
*/
